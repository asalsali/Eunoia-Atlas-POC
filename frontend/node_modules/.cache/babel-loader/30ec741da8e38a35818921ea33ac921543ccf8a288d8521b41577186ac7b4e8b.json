{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Alex Salsali\\\\Desktop\\\\Eunoia-Atlas-POC\\\\frontend\\\\src\\\\components\\\\WhisperFlow.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Heart, Mic, ArrowLeft, ArrowRight, Eye, EyeOff, Sparkles, Star, Zap, Globe, Shield, Users, Gift, Send, CreditCard } from 'lucide-react';\nimport { xamanCreatePayment } from '../services/api';\nimport { checkUserPaymentStatus } from '../services/userWalletService';\nimport { isCrossmarkAvailable, connectCrossmark, signRlusdPaymentWithCrossmark } from '../services/crossmarkService';\nimport DonationConfirmation from './DonationConfirmation';\nimport './WhisperFlow.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst QUOTES = ['\"Sometimes a few words can carry a lifetime.\"', '\"A small gift can change a whole day.\"', '\"Light grows where we speak hope.\"', '\"Your words have power beyond measure.\"', '\"Every whisper of kindness echoes forever.\"'];\nconst WhisperFlow = () => {\n  _s();\n  const [step, setStep] = useState(0);\n  const [message, setMessage] = useState('');\n  const [amount, setAmount] = useState('');\n  const [otherAmount, setOtherAmount] = useState('');\n  const [isPublic, setIsPublic] = useState(false);\n  const [email, setEmail] = useState('');\n  const [listening, setListening] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState(null);\n  const [quoteIdx, setQuoteIdx] = useState(0);\n  const [showConfetti, setShowConfetti] = useState(false);\n  const [transactionUrl, setTransactionUrl] = useState(null);\n  const [xamanState, setXamanState] = useState({\n    phase: 'idle'\n  });\n  const [fiatState, setFiatState] = useState({\n    phase: 'idle'\n  });\n  const [crossmarkBusy, setCrossmarkBusy] = useState(false);\n  const [crossmarkError, setCrossmarkError] = useState(null);\n  const [countdown, setCountdown] = useState(0);\n  const xamanPollRef = useRef(null);\n  const recognitionRef = useRef(null);\n  const navigate = useNavigate();\n  const MEDA_ADDRESS = 'r4jSjD22z6HtEu41eh1JrkD3KAW1PyM1RH';\n  const RLUSD_ISSUER = 'rQhWct2fv4Vc4KRjRgMrxa8xPN9Zx9iLKV';\n\n  // Quote rotation\n  useEffect(() => {\n    if (step === 0) {\n      const interval = setInterval(() => {\n        setQuoteIdx(prev => (prev + 1) % QUOTES.length);\n      }, 4000);\n      return () => clearInterval(interval);\n    }\n  }, [step]);\n\n  // Voice recognition setup\n  useEffect(() => {\n    if ('webkitSpeechRecognition' in window) {\n      recognitionRef.current = new window.webkitSpeechRecognition();\n      recognitionRef.current.continuous = false;\n      recognitionRef.current.interimResults = false;\n      recognitionRef.current.lang = 'en-US';\n      recognitionRef.current.onstart = () => setListening(true);\n      recognitionRef.current.onresult = event => {\n        const transcript = event.results[0][0].transcript;\n        setMessage(transcript);\n      };\n      recognitionRef.current.onerror = () => setListening(false);\n      recognitionRef.current.onend = () => setListening(false);\n    }\n  }, []);\n  const startListening = () => {\n    if (recognitionRef.current) {\n      recognitionRef.current.start();\n    }\n  };\n  const stopListening = () => {\n    if (recognitionRef.current) {\n      recognitionRef.current.stop();\n    }\n  };\n  const handleSubmit = async () => {\n    if (submitting) return;\n    setSubmitting(true);\n    setError(null);\n    const finalAmount = amount === 'other' ? Number(otherAmount) : Number(amount);\n    if (!finalAmount || finalAmount <= 0) {\n      setError('Please enter a valid amount');\n      setSubmitting(false);\n      return;\n    }\n\n    // Use the demo RLUSD flow (1 RLUSD fixed amount)\n    await startRlusdXamanFromWhisper();\n    setSubmitting(false);\n  };\n  const startRlusdXamanFromWhisper = async () => {\n    if (xamanState.phase !== 'idle') return;\n    setXamanState({\n      phase: 'creating'\n    });\n    try {\n      const response = await xamanCreatePayment({\n        destination: MEDA_ADDRESS,\n        amount: 1,\n        // Fixed 1 RLUSD like the demo\n        charity: 'MEDA',\n        cause_id: 'whisper_rlusd_demo',\n        asset: 'RLUSD',\n        issuer: RLUSD_ISSUER\n      });\n      if (response.success && response.payloadId) {\n        setXamanState({\n          phase: 'ready',\n          payloadId: response.payloadId,\n          qrCode: response.qrCode\n        });\n\n        // Auto-show confirmation after 10 seconds for demo purposes\n        setCountdown(10);\n        const countdownInterval = setInterval(() => {\n          setCountdown(prev => {\n            if (prev <= 1) {\n              clearInterval(countdownInterval);\n              if (xamanPollRef.current) clearInterval(xamanPollRef.current);\n              setXamanState({\n                phase: 'completed',\n                txid: 'demo-tx-' + Date.now().toString().slice(-8)\n              });\n              setTransactionUrl('https://testnet.xrpl.org/transactions/demo-tx-' + Date.now().toString().slice(-8));\n              setShowConfetti(true);\n              setTimeout(() => setShowConfetti(false), 2000);\n              setStep(5);\n              return 0;\n            }\n            return prev - 1;\n          });\n        }, 1000);\n\n        // Also add a backup timeout in case the interval fails\n        setTimeout(() => {\n          if (xamanPollRef.current) clearInterval(xamanPollRef.current);\n          setXamanState({\n            phase: 'completed',\n            txid: 'demo-tx-backup-' + Date.now().toString().slice(-8)\n          });\n          setTransactionUrl('https://testnet.xrpl.org/transactions/demo-tx-backup-' + Date.now().toString().slice(-8));\n          setShowConfetti(true);\n          setTimeout(() => setShowConfetti(false), 2000);\n          setStep(5);\n        }, 11000); // 11 seconds as backup\n\n        // Poll for completion (original logic - kept for real payments)\n        xamanPollRef.current = window.setInterval(async () => {\n          try {\n            const status = await checkUserPaymentStatus(response.payloadId);\n            if (status.completed) {\n              if (xamanPollRef.current) clearInterval(xamanPollRef.current);\n              setXamanState({\n                phase: 'completed',\n                txid: status.txid\n              });\n              setTransactionUrl(status.transactionUrl);\n              setShowConfetti(true);\n              setTimeout(() => setShowConfetti(false), 2000);\n              setStep(5);\n            }\n          } catch (error) {\n            console.error('Payment status check failed:', error);\n          }\n        }, 2000);\n      } else {\n        setXamanState({\n          phase: 'error',\n          message: 'Failed to create payment'\n        });\n      }\n    } catch (error) {\n      console.error('Xaman payment creation failed:', error);\n      setXamanState({\n        phase: 'error',\n        message: 'Failed to create payment'\n      });\n    }\n  };\n  const startRlusdCrossmarkFromWhisper = async () => {\n    if (crossmarkBusy) return;\n    setCrossmarkBusy(true);\n    setCrossmarkError(null);\n    try {\n      if (!isCrossmarkAvailable()) {\n        throw new Error('CROSSMARK extension not found');\n      }\n      await connectCrossmark();\n      const finalAmount = amount === 'other' ? Number(otherAmount) : Number(amount);\n      const result = await signRlusdPaymentWithCrossmark({\n        amount: finalAmount,\n        destination: MEDA_ADDRESS,\n        charity: 'MEDA',\n        causeId: 'whisper',\n        issuer: RLUSD_ISSUER\n      });\n      if (result.ok) {\n        setTransactionUrl(result.explorer || null);\n        setShowConfetti(true);\n        setTimeout(() => setShowConfetti(false), 2000);\n        setStep(5);\n      } else {\n        setCrossmarkError(result.error || 'Payment failed');\n      }\n    } catch (error) {\n      console.error('CROSSMARK payment failed:', error);\n      setCrossmarkError(error instanceof Error ? error.message : 'Payment failed');\n    } finally {\n      setCrossmarkBusy(false);\n    }\n  };\n  const startFiatTransaction = async () => {\n    try {\n      setFiatState({\n        phase: 'processing'\n      });\n\n      // Simulate fiat transaction processing\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      const txid = 'fiat-tx-' + Date.now().toString().slice(-8);\n      setFiatState({\n        phase: 'completed',\n        txid\n      });\n      setTransactionUrl(`https://testnet.xrpl.org/transactions/${txid}`);\n      setShowConfetti(true);\n      setTimeout(() => setShowConfetti(false), 2000);\n      setStep(5);\n    } catch (error) {\n      console.error('Fiat transaction error:', error);\n      setFiatState({\n        phase: 'error',\n        message: 'Fiat transaction failed. Please try again.'\n      });\n    }\n  };\n  const pieces = Array.from({\n    length: 7\n  }).map((_, i) => ({\n    left: `${15 + i * 12}%`,\n    bottom: '20px',\n    background: i % 2 ? '#7c3aed' : '#ede9fe'\n  }));\n  if (step === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"whisper-flow\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"hero-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"hero-quote\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: QUOTES[quoteIdx]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Share your story and make a difference\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"cta-button\",\n          onClick: () => setStep(1),\n          children: [/*#__PURE__*/_jsxDEV(Send, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 13\n          }, this), \"Whisper a Message\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"floating-elements\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"floating-icon\",\n          style: {\n            left: '10%',\n            top: '20%',\n            animationDelay: '0s'\n          },\n          children: /*#__PURE__*/_jsxDEV(Sparkles, {\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"floating-icon\",\n          style: {\n            left: '85%',\n            top: '15%',\n            animationDelay: '1s'\n          },\n          children: /*#__PURE__*/_jsxDEV(Star, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"floating-icon\",\n          style: {\n            left: '15%',\n            top: '70%',\n            animationDelay: '2s'\n          },\n          children: /*#__PURE__*/_jsxDEV(Zap, {\n            size: 22\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"floating-icon\",\n          style: {\n            left: '80%',\n            top: '75%',\n            animationDelay: '3s'\n          },\n          children: /*#__PURE__*/_jsxDEV(Globe, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"floating-icon\",\n          style: {\n            left: '90%',\n            top: '50%',\n            animationDelay: '4s'\n          },\n          children: /*#__PURE__*/_jsxDEV(Shield, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"people-images\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"person-image\",\n          style: {\n            left: '5%',\n            top: '30%',\n            animationDelay: '0.5s'\n          },\n          children: /*#__PURE__*/_jsxDEV(Users, {\n            size: 32\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"person-image\",\n          style: {\n            left: '75%',\n            top: '25%',\n            animationDelay: '1.5s'\n          },\n          children: /*#__PURE__*/_jsxDEV(Heart, {\n            size: 28\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"person-image\",\n          style: {\n            left: '20%',\n            top: '80%',\n            animationDelay: '2.5s'\n          },\n          children: /*#__PURE__*/_jsxDEV(Gift, {\n            size: 30\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }, this);\n  }\n  if (step === 1) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"whisper-flow\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"step-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"back-button\",\n            onClick: () => setStep(0),\n            children: /*#__PURE__*/_jsxDEV(ArrowLeft, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"step-indicator\",\n            children: \"Step 1 of 4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"What's your story?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Share a message that will inspire others to give\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-input-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: message,\n              onChange: e => setMessage(e.target.value),\n              placeholder: \"Tell us why this cause matters to you...\",\n              className: \"message-input\",\n              rows: 6\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: `voice-button ${listening ? 'listening' : ''}`,\n                onClick: listening ? stopListening : startListening,\n                disabled: !recognitionRef.current,\n                children: [/*#__PURE__*/_jsxDEV(Mic, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 342,\n                  columnNumber: 19\n                }, this), listening ? 'Listening...' : 'Voice']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"char-count\",\n                children: [message.length, \"/500\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 13\n          }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-message\",\n            role: \"alert\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"next-button\",\n            onClick: () => setStep(2),\n            disabled: !message.trim(),\n            children: [\"Continue\", /*#__PURE__*/_jsxDEV(ArrowRight, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 7\n    }, this);\n  }\n  if (step === 2) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"whisper-flow\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"step-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"back-button\",\n            onClick: () => setStep(1),\n            children: /*#__PURE__*/_jsxDEV(ArrowLeft, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"step-indicator\",\n            children: \"Step 2 of 4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Choose your amount\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Select how much you'd like to donate\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"amount-options\",\n            children: [[5, 10, 25, 50, 100].map(amt => /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `amount-option ${amount === amt ? 'selected' : ''}`,\n              onClick: () => setAmount(amt),\n              children: [\"$\", amt]\n            }, amt, true, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 17\n            }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `amount-option ${amount === 'other' ? 'selected' : ''}`,\n              onClick: () => setAmount('other'),\n              children: \"Other\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 13\n          }, this), amount === 'other' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"other-amount-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"other-amount\",\n              children: \"Enter amount:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"other-amount\",\n              type: \"number\",\n              value: otherAmount,\n              onChange: e => setOtherAmount(e.target.value),\n              placeholder: \"0.00\",\n              min: \"0.01\",\n              step: \"0.01\",\n              className: \"other-amount-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 15\n          }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-message\",\n            role: \"alert\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"next-button\",\n            onClick: () => setStep(3),\n            disabled: !amount && !otherAmount,\n            children: [\"Continue\", /*#__PURE__*/_jsxDEV(ArrowRight, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 7\n    }, this);\n  }\n  if (step === 3) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"whisper-flow\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"step-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"back-button\",\n            onClick: () => setStep(2),\n            children: /*#__PURE__*/_jsxDEV(ArrowLeft, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"step-indicator\",\n            children: \"Step 3 of 4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Review your donation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 442,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Make sure everything looks right before you give\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 443,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"review-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"review-message\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Your Message\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 447,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"\\\"\", message, \"\\\"\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"review-amount\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Amount\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 452,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"$\", amount === 'other' ? otherAmount : amount]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 453,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"review-visibility\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Visibility\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 457,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"visibility-toggle\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `toggle-option ${isPublic ? 'selected' : ''}`,\n                  onClick: () => setIsPublic(true),\n                  children: [/*#__PURE__*/_jsxDEV(Eye, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 463,\n                    columnNumber: 21\n                  }, this), \"Public\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 459,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `toggle-option ${!isPublic ? 'selected' : ''}`,\n                  onClick: () => setIsPublic(false),\n                  children: [/*#__PURE__*/_jsxDEV(EyeOff, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 470,\n                    columnNumber: 21\n                  }, this), \"Anonymous\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 466,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 458,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 456,\n              columnNumber: 15\n            }, this), isPublic && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"email-input\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"email\",\n                children: \"Email (optional, for receipt)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 478,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"email\",\n                type: \"email\",\n                value: email,\n                onChange: e => setEmail(e.target.value),\n                placeholder: \"your@email.com\",\n                className: \"email-field\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 479,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 13\n          }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-message\",\n            role: \"alert\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"next-button\",\n            onClick: handleSubmit,\n            children: [\"Send my words and support\", /*#__PURE__*/_jsxDEV(Send, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 498,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 7\n    }, this);\n  }\n  if (step === 4) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"whisper-flow\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"step-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"back-button\",\n            onClick: () => setStep(3),\n            children: /*#__PURE__*/_jsxDEV(ArrowLeft, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 512,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 511,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"step-indicator\",\n            children: \"Step 4 of 4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Choose payment method\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 518,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Select how you'd like to complete your donation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 519,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"payment-options\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"option-button primary\",\n              onClick: startRlusdXamanFromWhisper,\n              children: [/*#__PURE__*/_jsxDEV(Heart, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 526,\n                columnNumber: 17\n              }, this), \"RLUSD (XAMAN)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 522,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"option-button\",\n              onClick: startRlusdCrossmarkFromWhisper,\n              disabled: crossmarkBusy,\n              children: crossmarkBusy ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spinner\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 537,\n                  columnNumber: 21\n                }, this), \"Opening\\u2026\"]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Heart, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 542,\n                  columnNumber: 21\n                }, this), \"RLUSD (CROSSMARK)\"]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 530,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"option-button\",\n              onClick: startFiatTransaction,\n              disabled: fiatState.phase === 'processing',\n              children: fiatState.phase === 'processing' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spinner\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 555,\n                  columnNumber: 21\n                }, this), \"Processing\\u2026\"]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(CreditCard, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 560,\n                  columnNumber: 21\n                }, this), \"Fiat Payment (USD)\"]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 548,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 521,\n            columnNumber: 13\n          }, this), crossmarkError && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-message\",\n            role: \"alert\",\n            children: crossmarkError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 567,\n            columnNumber: 32\n          }, this), fiatState.phase === 'error' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-message\",\n            role: \"alert\",\n            children: fiatState.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 568,\n            columnNumber: 45\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 517,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 509,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 508,\n      columnNumber: 7\n    }, this);\n  }\n  if (step === 5) {\n    return /*#__PURE__*/_jsxDEV(DonationConfirmation, {\n      message: message,\n      amount: amount === 'other' ? Number(otherAmount) : Number(amount),\n      transactionHash: xamanState.phase === 'completed' ? xamanState.txid : fiatState.phase === 'completed' ? fiatState.txid : undefined,\n      transactionUrl: transactionUrl || undefined,\n      isPublic: isPublic,\n      onReturnHome: () => window.location.href = '/'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 577,\n      columnNumber: 7\n    }, this);\n  }\n  return null;\n};\n_s(WhisperFlow, \"FaPSXcN6YkatmZGVq4ukE5VyywI=\", false, function () {\n  return [useNavigate];\n});\n_c = WhisperFlow;\nexport default WhisperFlow;\nvar _c;\n$RefreshReg$(_c, \"WhisperFlow\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","Heart","Mic","ArrowLeft","ArrowRight","Eye","EyeOff","Sparkles","Star","Zap","Globe","Shield","Users","Gift","Send","CreditCard","xamanCreatePayment","checkUserPaymentStatus","isCrossmarkAvailable","connectCrossmark","signRlusdPaymentWithCrossmark","DonationConfirmation","jsxDEV","_jsxDEV","Fragment","_Fragment","QUOTES","WhisperFlow","_s","step","setStep","message","setMessage","amount","setAmount","otherAmount","setOtherAmount","isPublic","setIsPublic","email","setEmail","listening","setListening","submitting","setSubmitting","error","setError","quoteIdx","setQuoteIdx","showConfetti","setShowConfetti","transactionUrl","setTransactionUrl","xamanState","setXamanState","phase","fiatState","setFiatState","crossmarkBusy","setCrossmarkBusy","crossmarkError","setCrossmarkError","countdown","setCountdown","xamanPollRef","recognitionRef","navigate","MEDA_ADDRESS","RLUSD_ISSUER","interval","setInterval","prev","length","clearInterval","window","current","webkitSpeechRecognition","continuous","interimResults","lang","onstart","onresult","event","transcript","results","onerror","onend","startListening","start","stopListening","stop","handleSubmit","finalAmount","Number","startRlusdXamanFromWhisper","response","destination","charity","cause_id","asset","issuer","success","payloadId","qrCode","countdownInterval","txid","Date","now","toString","slice","setTimeout","status","completed","console","startRlusdCrossmarkFromWhisper","Error","result","causeId","ok","explorer","startFiatTransaction","Promise","resolve","pieces","Array","from","map","_","i","left","bottom","background","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","size","style","top","animationDelay","value","onChange","e","target","placeholder","rows","disabled","role","trim","amt","htmlFor","id","type","min","transactionHash","undefined","onReturnHome","location","href","_c","$RefreshReg$"],"sources":["C:/Users/Alex Salsali/Desktop/Eunoia-Atlas-POC/frontend/src/components/WhisperFlow.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Heart, MessageSquare, Mic, ArrowLeft, ArrowRight, CheckCircle2, Eye, EyeOff, Sparkles, Star, Zap, Globe, Shield, Users, Gift, Send, CreditCard } from 'lucide-react';\nimport { xamanCreatePayment } from '../services/api';\nimport { checkUserPaymentStatus } from '../services/userWalletService';\nimport { isCrossmarkAvailable, connectCrossmark, signRlusdPaymentWithCrossmark } from '../services/crossmarkService';\nimport QRModal from './common/QRModal';\nimport DonationConfirmation from './DonationConfirmation';\nimport './WhisperFlow.css';\n\nconst QUOTES = [\n  '\"Sometimes a few words can carry a lifetime.\"',\n  '\"A small gift can change a whole day.\"',\n  '\"Light grows where we speak hope.\"',\n  '\"Your words have power beyond measure.\"',\n  '\"Every whisper of kindness echoes forever.\"',\n];\n\nconst WhisperFlow: React.FC = () => {\n  const [step, setStep] = useState(0);\n  const [message, setMessage] = useState('');\n  const [amount, setAmount] = useState<number | 'other' | ''>('');\n  const [otherAmount, setOtherAmount] = useState('');\n  const [isPublic, setIsPublic] = useState(false);\n  const [email, setEmail] = useState('');\n  const [listening, setListening] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [quoteIdx, setQuoteIdx] = useState(0);\n  const [showConfetti, setShowConfetti] = useState(false);\n  const [transactionUrl, setTransactionUrl] = useState<string | null>(null);\n  \n  const [xamanState, setXamanState] = useState<\n    | { phase: 'idle' }\n    | { phase: 'creating' }\n    | { phase: 'ready'; payloadId: string; qrCode?: string }\n    | { phase: 'completed'; txid?: string }\n    | { phase: 'error'; message: string }\n  >({ phase: 'idle' });\n\n  const [fiatState, setFiatState] = useState<\n    | { phase: 'idle' }\n    | { phase: 'processing' }\n    | { phase: 'completed'; txid?: string }\n    | { phase: 'error'; message: string }\n  >({ phase: 'idle' });\n\n  const [crossmarkBusy, setCrossmarkBusy] = useState(false);\n  const [crossmarkError, setCrossmarkError] = useState<string | null>(null);\n  const [countdown, setCountdown] = useState(0);\n  const xamanPollRef = useRef<number | null>(null);\n  const recognitionRef = useRef<any>(null);\n  const navigate = useNavigate();\n\n  const MEDA_ADDRESS = 'r4jSjD22z6HtEu41eh1JrkD3KAW1PyM1RH';\n  const RLUSD_ISSUER = 'rQhWct2fv4Vc4KRjRgMrxa8xPN9Zx9iLKV';\n\n  // Quote rotation\n  useEffect(() => {\n    if (step === 0) {\n      const interval = setInterval(() => {\n        setQuoteIdx((prev) => (prev + 1) % QUOTES.length);\n      }, 4000);\n      return () => clearInterval(interval);\n    }\n  }, [step]);\n\n  // Voice recognition setup\n  useEffect(() => {\n    if ('webkitSpeechRecognition' in window) {\n      recognitionRef.current = new (window as any).webkitSpeechRecognition();\n      recognitionRef.current.continuous = false;\n      recognitionRef.current.interimResults = false;\n      recognitionRef.current.lang = 'en-US';\n\n      recognitionRef.current.onstart = () => setListening(true);\n      recognitionRef.current.onresult = (event: any) => {\n        const transcript = event.results[0][0].transcript;\n        setMessage(transcript);\n      };\n      recognitionRef.current.onerror = () => setListening(false);\n      recognitionRef.current.onend = () => setListening(false);\n    }\n  }, []);\n\n  const startListening = () => {\n    if (recognitionRef.current) {\n      recognitionRef.current.start();\n    }\n  };\n\n  const stopListening = () => {\n    if (recognitionRef.current) {\n      recognitionRef.current.stop();\n    }\n  };\n\n  const handleSubmit = async () => {\n    if (submitting) return;\n    \n    setSubmitting(true);\n    setError(null);\n    \n    const finalAmount = amount === 'other' ? Number(otherAmount) : Number(amount);\n    \n    if (!finalAmount || finalAmount <= 0) {\n      setError('Please enter a valid amount');\n      setSubmitting(false);\n      return;\n    }\n\n    // Use the demo RLUSD flow (1 RLUSD fixed amount)\n    await startRlusdXamanFromWhisper();\n    setSubmitting(false);\n  };\n\n  const startRlusdXamanFromWhisper = async () => {\n    if (xamanState.phase !== 'idle') return;\n    \n    setXamanState({ phase: 'creating' });\n    \n    try {\n      const response = await xamanCreatePayment({\n        destination: MEDA_ADDRESS,\n        amount: 1, // Fixed 1 RLUSD like the demo\n        charity: 'MEDA',\n        cause_id: 'whisper_rlusd_demo',\n        asset: 'RLUSD',\n        issuer: RLUSD_ISSUER\n      });\n      \n      if (response.success && response.payloadId) {\n        setXamanState({ \n          phase: 'ready', \n          payloadId: response.payloadId,\n          qrCode: response.qrCode\n        });\n        \n        // Auto-show confirmation after 10 seconds for demo purposes\n        setCountdown(10);\n        const countdownInterval = setInterval(() => {\n          setCountdown(prev => {\n            if (prev <= 1) {\n              clearInterval(countdownInterval);\n              if (xamanPollRef.current) clearInterval(xamanPollRef.current);\n              setXamanState({ \n                phase: 'completed', \n                txid: 'demo-tx-' + Date.now().toString().slice(-8)\n              });\n              setTransactionUrl('https://testnet.xrpl.org/transactions/demo-tx-' + Date.now().toString().slice(-8));\n              setShowConfetti(true);\n              setTimeout(() => setShowConfetti(false), 2000);\n              setStep(5);\n              return 0;\n            }\n            return prev - 1;\n          });\n        }, 1000);\n        \n        // Also add a backup timeout in case the interval fails\n        setTimeout(() => {\n          if (xamanPollRef.current) clearInterval(xamanPollRef.current);\n          setXamanState({ \n            phase: 'completed', \n            txid: 'demo-tx-backup-' + Date.now().toString().slice(-8)\n          });\n          setTransactionUrl('https://testnet.xrpl.org/transactions/demo-tx-backup-' + Date.now().toString().slice(-8));\n          setShowConfetti(true);\n          setTimeout(() => setShowConfetti(false), 2000);\n          setStep(5);\n        }, 11000); // 11 seconds as backup\n        \n        // Poll for completion (original logic - kept for real payments)\n        xamanPollRef.current = window.setInterval(async () => {\n          try {\n            const status = await checkUserPaymentStatus(response.payloadId!);\n            if (status.completed) {\n              if (xamanPollRef.current) clearInterval(xamanPollRef.current);\n              setXamanState({ phase: 'completed', txid: status.txid });\n              setTransactionUrl(status.transactionUrl);\n              setShowConfetti(true);\n              setTimeout(() => setShowConfetti(false), 2000);\n              setStep(5);\n            }\n          } catch (error) {\n            console.error('Payment status check failed:', error);\n          }\n        }, 2000);\n      } else {\n        setXamanState({ phase: 'error', message: 'Failed to create payment' });\n      }\n    } catch (error) {\n      console.error('Xaman payment creation failed:', error);\n      setXamanState({ phase: 'error', message: 'Failed to create payment' });\n    }\n  };\n\n  const startRlusdCrossmarkFromWhisper = async () => {\n    if (crossmarkBusy) return;\n    \n    setCrossmarkBusy(true);\n    setCrossmarkError(null);\n    \n    try {\n      if (!isCrossmarkAvailable()) {\n        throw new Error('CROSSMARK extension not found');\n      }\n      \n      await connectCrossmark();\n      const finalAmount = amount === 'other' ? Number(otherAmount) : Number(amount);\n      \n      const result = await signRlusdPaymentWithCrossmark({\n        amount: finalAmount,\n        destination: MEDA_ADDRESS,\n        charity: 'MEDA',\n        causeId: 'whisper',\n        issuer: RLUSD_ISSUER\n      });\n      \n      if (result.ok) {\n        setTransactionUrl(result.explorer || null);\n        setShowConfetti(true);\n        setTimeout(() => setShowConfetti(false), 2000);\n        setStep(5);\n      } else {\n        setCrossmarkError(result.error || 'Payment failed');\n      }\n    } catch (error) {\n      console.error('CROSSMARK payment failed:', error);\n      setCrossmarkError(error instanceof Error ? error.message : 'Payment failed');\n    } finally {\n      setCrossmarkBusy(false);\n    }\n  };\n\n  const startFiatTransaction = async () => {\n    try {\n      setFiatState({ phase: 'processing' });\n      \n      // Simulate fiat transaction processing\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      \n      const txid = 'fiat-tx-' + Date.now().toString().slice(-8);\n      setFiatState({ phase: 'completed', txid });\n      setTransactionUrl(`https://testnet.xrpl.org/transactions/${txid}`);\n      setShowConfetti(true);\n      setTimeout(() => setShowConfetti(false), 2000);\n      setStep(5);\n    } catch (error) {\n      console.error('Fiat transaction error:', error);\n      setFiatState({ phase: 'error', message: 'Fiat transaction failed. Please try again.' });\n    }\n  };\n\n  const pieces = Array.from({ length: 7 }).map((_, i) => ({\n    left: `${15 + i * 12}%`,\n    bottom: '20px',\n    background: i % 2 ? '#7c3aed' : '#ede9fe',\n  }));\n\n  if (step === 0) {\n    return (\n      <div className=\"whisper-flow\">\n        <div className=\"hero-content\">\n          <div className=\"hero-quote\">\n            <h1>{QUOTES[quoteIdx]}</h1>\n            <p>Share your story and make a difference</p>\n          </div>\n          <button \n            className=\"cta-button\"\n            onClick={() => setStep(1)}\n          >\n            <Send size={20} />\n            Whisper a Message\n          </button>\n        </div>\n\n        {/* Floating elements */}\n        <div className=\"floating-elements\">\n          <div className=\"floating-icon\" style={{ left: '10%', top: '20%', animationDelay: '0s' }}>\n            <Sparkles size={24} />\n          </div>\n          <div className=\"floating-icon\" style={{ left: '85%', top: '15%', animationDelay: '1s' }}>\n            <Star size={20} />\n          </div>\n          <div className=\"floating-icon\" style={{ left: '15%', top: '70%', animationDelay: '2s' }}>\n            <Zap size={22} />\n          </div>\n          <div className=\"floating-icon\" style={{ left: '80%', top: '75%', animationDelay: '3s' }}>\n            <Globe size={18} />\n          </div>\n          <div className=\"floating-icon\" style={{ left: '90%', top: '50%', animationDelay: '4s' }}>\n            <Shield size={16} />\n          </div>\n        </div>\n\n        {/* People in need images */}\n        <div className=\"people-images\">\n          <div className=\"person-image\" style={{ left: '5%', top: '30%', animationDelay: '0.5s' }}>\n            <Users size={32} />\n          </div>\n          <div className=\"person-image\" style={{ left: '75%', top: '25%', animationDelay: '1.5s' }}>\n            <Heart size={28} />\n          </div>\n          <div className=\"person-image\" style={{ left: '20%', top: '80%', animationDelay: '2.5s' }}>\n            <Gift size={30} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (step === 1) {\n    return (\n      <div className=\"whisper-flow\">\n        <div className=\"step-container\">\n          <div className=\"step-header\">\n            <button className=\"back-button\" onClick={() => setStep(0)}>\n              <ArrowLeft size={20} />\n            </button>\n            <div className=\"step-indicator\">Step 1 of 4</div>\n          </div>\n          \n          <div className=\"step-content\">\n            <h2>What's your story?</h2>\n            <p>Share a message that will inspire others to give</p>\n            \n            <div className=\"message-input-container\">\n              <textarea\n                value={message}\n                onChange={(e) => setMessage(e.target.value)}\n                placeholder=\"Tell us why this cause matters to you...\"\n                className=\"message-input\"\n                rows={6}\n              />\n              <div className=\"input-actions\">\n                <button \n                  className={`voice-button ${listening ? 'listening' : ''}`}\n                  onClick={listening ? stopListening : startListening}\n                  disabled={!recognitionRef.current}\n                >\n                  <Mic size={16} />\n                  {listening ? 'Listening...' : 'Voice'}\n                </button>\n                <div className=\"char-count\">{message.length}/500</div>\n              </div>\n            </div>\n\n            {error && <div className=\"error-message\" role=\"alert\">{error}</div>}\n            \n            <button \n              className=\"next-button\"\n              onClick={() => setStep(2)}\n              disabled={!message.trim()}\n            >\n              Continue\n              <ArrowRight size={16} />\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (step === 2) {\n    return (\n      <div className=\"whisper-flow\">\n        <div className=\"step-container\">\n          <div className=\"step-header\">\n            <button className=\"back-button\" onClick={() => setStep(1)}>\n              <ArrowLeft size={20} />\n            </button>\n            <div className=\"step-indicator\">Step 2 of 4</div>\n          </div>\n          \n          <div className=\"step-content\">\n            <h2>Choose your amount</h2>\n            <p>Select how much you'd like to donate</p>\n            \n            <div className=\"amount-options\">\n              {[5, 10, 25, 50, 100].map((amt) => (\n                <button\n                  key={amt}\n                  className={`amount-option ${amount === amt ? 'selected' : ''}`}\n                  onClick={() => setAmount(amt)}\n                >\n                  ${amt}\n                </button>\n              ))}\n              <button\n                className={`amount-option ${amount === 'other' ? 'selected' : ''}`}\n                onClick={() => setAmount('other')}\n              >\n                Other\n              </button>\n            </div>\n\n            {amount === 'other' && (\n              <div className=\"other-amount-container\">\n                <label htmlFor=\"other-amount\">Enter amount:</label>\n                <input\n                  id=\"other-amount\"\n                  type=\"number\"\n                  value={otherAmount}\n                  onChange={(e) => setOtherAmount(e.target.value)}\n                  placeholder=\"0.00\"\n                  min=\"0.01\"\n                  step=\"0.01\"\n                  className=\"other-amount-input\"\n                />\n              </div>\n            )}\n\n            {error && <div className=\"error-message\" role=\"alert\">{error}</div>}\n            \n            <button \n              className=\"next-button\"\n              onClick={() => setStep(3)}\n              disabled={!amount && !otherAmount}\n            >\n              Continue\n              <ArrowRight size={16} />\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (step === 3) {\n    return (\n      <div className=\"whisper-flow\">\n        <div className=\"step-container\">\n          <div className=\"step-header\">\n            <button className=\"back-button\" onClick={() => setStep(2)}>\n              <ArrowLeft size={20} />\n            </button>\n            <div className=\"step-indicator\">Step 3 of 4</div>\n          </div>\n          \n          <div className=\"step-content\">\n            <h2>Review your donation</h2>\n            <p>Make sure everything looks right before you give</p>\n            \n            <div className=\"review-card\">\n              <div className=\"review-message\">\n                <h3>Your Message</h3>\n                <p>\"{message}\"</p>\n              </div>\n              \n              <div className=\"review-amount\">\n                <h3>Amount</h3>\n                <p>${amount === 'other' ? otherAmount : amount}</p>\n              </div>\n\n              <div className=\"review-visibility\">\n                <h3>Visibility</h3>\n                <div className=\"visibility-toggle\">\n                  <button\n                    className={`toggle-option ${isPublic ? 'selected' : ''}`}\n                    onClick={() => setIsPublic(true)}\n                  >\n                    <Eye size={16} />\n                    Public\n                  </button>\n                  <button\n                    className={`toggle-option ${!isPublic ? 'selected' : ''}`}\n                    onClick={() => setIsPublic(false)}\n                  >\n                    <EyeOff size={16} />\n                    Anonymous\n                  </button>\n                </div>\n              </div>\n\n              {isPublic && (\n                <div className=\"email-input\">\n                  <label htmlFor=\"email\">Email (optional, for receipt)</label>\n                  <input\n                    id=\"email\"\n                    type=\"email\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                    placeholder=\"your@email.com\"\n                    className=\"email-field\"\n                  />\n                </div>\n              )}\n            </div>\n\n            {error && <div className=\"error-message\" role=\"alert\">{error}</div>}\n            \n            <button \n              className=\"next-button\"\n              onClick={handleSubmit}\n            >\n              Send my words and support\n              <Send size={16} />\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (step === 4) {\n    return (\n      <div className=\"whisper-flow\">\n        <div className=\"step-container\">\n          <div className=\"step-header\">\n            <button className=\"back-button\" onClick={() => setStep(3)}>\n              <ArrowLeft size={20} />\n            </button>\n            <div className=\"step-indicator\">Step 4 of 4</div>\n          </div>\n          \n          <div className=\"step-content\">\n            <h2>Choose payment method</h2>\n            <p>Select how you'd like to complete your donation</p>\n            \n            <div className=\"payment-options\">\n              <button \n                className=\"option-button primary\" \n                onClick={startRlusdXamanFromWhisper}\n              >\n                <Heart size={16} />\n                RLUSD (XAMAN)\n              </button>\n              \n              <button \n                className=\"option-button\" \n                onClick={startRlusdCrossmarkFromWhisper} \n                disabled={crossmarkBusy}\n              >\n                {crossmarkBusy ? (\n                  <>\n                    <div className=\"spinner\" />\n                    Opening\n                  </>\n                ) : (\n                  <>\n                    <Heart size={16} />\n                    RLUSD (CROSSMARK)\n                  </>\n                )}\n              </button>\n\n              <button \n                className=\"option-button\" \n                onClick={startFiatTransaction}\n                disabled={fiatState.phase === 'processing'}\n              >\n                {fiatState.phase === 'processing' ? (\n                  <>\n                    <div className=\"spinner\" />\n                    Processing\n                  </>\n                ) : (\n                  <>\n                    <CreditCard size={16} />\n                    Fiat Payment (USD)\n                  </>\n                )}\n              </button>\n            </div>\n            \n            {crossmarkError && <div className=\"error-message\" role=\"alert\">{crossmarkError}</div>}\n            {fiatState.phase === 'error' && <div className=\"error-message\" role=\"alert\">{fiatState.message}</div>}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (step === 5) {\n    return (\n      <DonationConfirmation\n        message={message}\n        amount={amount === 'other' ? Number(otherAmount) : Number(amount)}\n        transactionHash={xamanState.phase === 'completed' ? xamanState.txid : fiatState.phase === 'completed' ? fiatState.txid : undefined}\n        transactionUrl={transactionUrl || undefined}\n        isPublic={isPublic}\n        onReturnHome={() => window.location.href = '/'}\n      />\n    );\n  }\n\n  return null;\n};\n\nexport default WhisperFlow;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}