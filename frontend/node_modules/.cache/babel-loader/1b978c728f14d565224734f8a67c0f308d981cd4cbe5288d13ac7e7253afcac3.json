{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Alex Salsali\\\\Desktop\\\\Eunoia-Atlas-POC\\\\frontend\\\\src\\\\components\\\\WhisperFlow.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { xamanCreatePayment } from '../services/api';\nimport { isCrossmarkAvailable, connectCrossmark, signRlusdPaymentWithCrossmark } from '../services/crossmarkService';\nimport DonationConfirmation from './DonationConfirmation';\nimport { Heart, Mic, ArrowLeft, ArrowRight, Eye, EyeOff, Sparkles, Star, Zap, Globe, Shield, Users, Gift, Send, CreditCard } from 'lucide-react';\nimport './WhisperFlow.css';\n\n// Helpers\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst DRAFT_KEY = 'whisperDraftV1';\nconst PENDING_KEY = 'whisperPendingDonationV1';\nconst QUOTES = ['\"Sometimes a few words can carry a lifetime.\"', '\"A small gift can change a whole day.\"', '\"Light grows where we speak hope.\"', '\"Your words have power beyond measure.\"', '\"Every whisper of kindness echoes forever.\"'];\nconst STORY_THEME = {\n  meda: {\n    accent: '#7c3aed',\n    soft1: '#ede9fe',\n    soft2: '#faf5ff'\n  },\n  tara: {\n    accent: '#ec4899',\n    soft1: '#ffe4f1',\n    soft2: '#fff7fb'\n  },\n  ocean: {\n    accent: '#2563eb',\n    soft1: '#dbeafe',\n    soft2: '#eff6ff'\n  }\n};\nfunction saveDraft(data) {\n  try {\n    localStorage.setItem(DRAFT_KEY, JSON.stringify(data));\n  } catch {}\n}\nfunction loadDraft() {\n  try {\n    return JSON.parse(localStorage.getItem(DRAFT_KEY) || 'null');\n  } catch {\n    return null;\n  }\n}\nfunction getPendingDonation() {\n  try {\n    return JSON.parse(localStorage.getItem(PENDING_KEY) || 'null');\n  } catch {\n    return null;\n  }\n}\nfunction clearPendingDonation() {\n  try {\n    localStorage.removeItem(PENDING_KEY);\n  } catch {}\n}\nfunction useReducedMotion() {\n  _s();\n  const [reduced, setReduced] = useState(false);\n  useEffect(() => {\n    const m = window.matchMedia('(prefers-reduced-motion: reduce)');\n    setReduced(m.matches);\n    const handler = e => setReduced(e.matches);\n    if (m.addEventListener) m.addEventListener('change', handler);else m.addListener(handler);\n    return () => {\n      if (m.removeEventListener) m.removeEventListener('change', handler);else m.removeListener(handler);\n    };\n  }, []);\n  return reduced;\n}\n_s(useReducedMotion, \"PAG4zvF6+IsK2eHB7xTPE8NJ12w=\");\nfunction vibrate(ms = 10) {\n  try {\n    if (navigator.vibrate) navigator.vibrate(ms);\n  } catch {}\n}\nconst WhisperFlow = () => {\n  _s2();\n  const [step, setStep] = useState(0);\n\n  // data\n  const [message, setMessage] = useState('');\n  const [amount, setAmount] = useState('');\n  const [otherAmount, setOtherAmount] = useState('');\n  const [isPublic, setIsPublic] = useState(false);\n  const [email, setEmail] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState(null);\n  const [showUndo, setShowUndo] = useState(false);\n  const undoTimerRef = useRef(null);\n  const [quoteIdx, setQuoteIdx] = useState(0);\n  const [showConfetti, setShowConfetti] = useState(false);\n  const [transactionUrl, setTransactionUrl] = useState(null);\n  const [xamanState, setXamanState] = useState({\n    phase: 'idle'\n  });\n  const [countdown, setCountdown] = useState(0);\n  const xamanPollRef = useRef(null);\n  const [crossmarkBusy, setCrossmarkBusy] = useState(false);\n  const [crossmarkError, setCrossmarkError] = useState(null);\n\n  // Fiat transaction state\n  const [fiatState, setFiatState] = useState({\n    phase: 'idle'\n  });\n  const MEDA_ADDRESS = process.env.REACT_APP_MEDA_WALLET_ADDRESS || 'rEtpfxtsuHGWbRYFGszE5etYNPaiogDpxC';\n  const RLUSD_ISSUER = 'rQhWct2fv4Vc4KRjRgMrxa8xPN9Zx9iLKV';\n  const reducedMotion = useReducedMotion();\n\n  // Voice\n  const [listening, setListening] = useState(false);\n  const recognitionRef = useRef(null);\n\n  // Deep link\n  const searchParams = useMemo(() => new URLSearchParams(window.location.search), []);\n  const storyId = (searchParams.get('story') || '').toLowerCase();\n  const prefillAmount = searchParams.get('amount');\n  const prefillMessage = searchParams.get('message');\n\n  // Theme\n  const theme = STORY_THEME[storyId] || STORY_THEME['meda'];\n  useEffect(() => {\n    // Load draft if exists\n    const draft = loadDraft();\n    if (draft) {\n      setMessage(draft.message || '');\n      setAmount(draft.amount || '');\n      setOtherAmount(draft.otherAmount || '');\n      setIsPublic(draft.isPublic || false);\n      setEmail(draft.email || '');\n    }\n\n    // Check for pending donation\n    const pending = getPendingDonation();\n    if (pending) {\n      setMessage(pending.message || '');\n      setAmount(pending.amount || '');\n      setOtherAmount(pending.otherAmount || '');\n      setIsPublic(pending.isPublic || false);\n      setEmail(pending.email || '');\n      setStep(4);\n    }\n\n    // Prefill from URL params\n    if (prefillAmount) {\n      const numAmount = Number(prefillAmount);\n      if (numAmount > 0) {\n        setAmount(numAmount);\n      }\n    }\n    if (prefillMessage) {\n      setMessage(prefillMessage);\n    }\n\n    // Auto-advance if we have prefill data\n    if (prefillAmount || prefillMessage) {\n      setStep(1);\n    }\n  }, [prefillAmount, prefillMessage]);\n\n  // Save draft on changes\n  useEffect(() => {\n    if (step > 0) {\n      saveDraft({\n        message,\n        amount,\n        otherAmount,\n        isPublic,\n        email\n      });\n    }\n  }, [message, amount, otherAmount, isPublic, email, step]);\n\n  // Auto-advance quote\n  useEffect(() => {\n    if (step === 0) {\n      const interval = setInterval(() => {\n        setQuoteIdx(prev => (prev + 1) % QUOTES.length);\n      }, 4000);\n      return () => clearInterval(interval);\n    }\n  }, [step]);\n\n  // Voice recognition setup\n  useEffect(() => {\n    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {\n      const SpeechRecognition = window.webkitSpeechRecognition || window.SpeechRecognition;\n      recognitionRef.current = new SpeechRecognition();\n      recognitionRef.current.continuous = false;\n      recognitionRef.current.interimResults = false;\n      recognitionRef.current.lang = 'en-US';\n      recognitionRef.current.onresult = event => {\n        const transcript = event.results[0][0].transcript;\n        setMessage(prev => prev + ' ' + transcript);\n        setListening(false);\n        vibrate();\n      };\n      recognitionRef.current.onerror = event => {\n        console.error('Speech recognition error:', event.error);\n        setListening(false);\n      };\n      recognitionRef.current.onend = () => {\n        setListening(false);\n      };\n    }\n  }, []);\n  const startListening = () => {\n    if (recognitionRef.current) {\n      recognitionRef.current.start();\n      setListening(true);\n      vibrate();\n    }\n  };\n  const stopListening = () => {\n    if (recognitionRef.current) {\n      recognitionRef.current.stop();\n      setListening(false);\n    }\n  };\n  const handleSubmit = () => {\n    if (!message.trim()) {\n      setError('Please enter your message');\n      return;\n    }\n    if (!amount && !otherAmount) {\n      setError('Please select an amount');\n      return;\n    }\n    setError(null);\n    setStep(4);\n  };\n  const handleUndo = () => {\n    setStep(3);\n    setShowUndo(false);\n    if (undoTimerRef.current) {\n      clearTimeout(undoTimerRef.current);\n      undoTimerRef.current = null;\n    }\n  };\n  const startRlusdXamanFromWhisper = async () => {\n    try {\n      setXamanState({\n        phase: 'creating'\n      });\n      const response = await xamanCreatePayment({\n        destination: MEDA_ADDRESS,\n        amount: 1,\n        charity: 'MEDA',\n        cause_id: 'whisper_rlusd',\n        asset: 'RLUSD',\n        issuer: RLUSD_ISSUER\n      });\n      if (response.success && response.payloadId) {\n        setXamanState({\n          phase: 'ready',\n          payloadId: response.payloadId,\n          qrCode: response.qrCode\n        });\n\n        // Auto-confirmation for demo (10 seconds)\n        setCountdown(10);\n        const countdownInterval = setInterval(() => {\n          setCountdown(prev => {\n            if (prev <= 1) {\n              clearInterval(countdownInterval);\n              setXamanState({\n                phase: 'completed',\n                txid: 'demo-tx-' + Date.now().toString().slice(-8)\n              });\n              setTransactionUrl('https://testnet.xrpl.org/transactions/demo-tx-' + Date.now().toString().slice(-8));\n              setShowConfetti(true);\n              setTimeout(() => setShowConfetti(false), 2000);\n              setStep(5);\n              return 0;\n            }\n            return prev - 1;\n          });\n        }, 1000);\n      } else {\n        setXamanState({\n          phase: 'error',\n          message: 'Failed to create payment'\n        });\n      }\n    } catch (error) {\n      console.error('Error creating Xaman payment:', error);\n      setXamanState({\n        phase: 'error',\n        message: 'Failed to create payment'\n      });\n    }\n  };\n  const startRlusdCrossmarkFromWhisper = async () => {\n    try {\n      setCrossmarkBusy(true);\n      setCrossmarkError(null);\n      if (!isCrossmarkAvailable()) {\n        setCrossmarkError('Crossmark wallet not available. Please install Crossmark extension.');\n        return;\n      }\n      await connectCrossmark();\n      const txid = await signRlusdPaymentWithCrossmark({\n        destination: MEDA_ADDRESS,\n        amount: 1,\n        charity: 'MEDA',\n        causeId: 'whisper_rlusd',\n        issuer: RLUSD_ISSUER\n      });\n      if (txid) {\n        setTransactionUrl(`https://testnet.xrpl.org/transactions/${txid}`);\n        setShowConfetti(true);\n        setTimeout(() => setShowConfetti(false), 2000);\n        setStep(5);\n      } else {\n        setCrossmarkError('Payment failed. Please try again.');\n      }\n    } catch (error) {\n      console.error('Crossmark payment error:', error);\n      setCrossmarkError('Payment failed. Please try again.');\n    } finally {\n      setCrossmarkBusy(false);\n    }\n  };\n  const startFiatTransaction = async () => {\n    try {\n      setFiatState({\n        phase: 'processing'\n      });\n\n      // Simulate fiat transaction processing\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      const txid = 'fiat-tx-' + Date.now().toString().slice(-8);\n      setFiatState({\n        phase: 'completed',\n        txid\n      });\n      setTransactionUrl(`https://testnet.xrpl.org/transactions/${txid}`);\n      setShowConfetti(true);\n      setTimeout(() => setShowConfetti(false), 2000);\n      setStep(5);\n    } catch (error) {\n      console.error('Fiat transaction error:', error);\n      setFiatState({\n        phase: 'error',\n        message: 'Fiat transaction failed. Please try again.'\n      });\n    }\n  };\n  const pieces = useMemo(() => {\n    return Array.from({\n      length: 50\n    }, (_, i) => ({\n      left: Math.random() * 100,\n      bottom: Math.random() * 100,\n      background: ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#ffeaa7', '#dda0dd', '#98d8c8'][Math.floor(Math.random() * 7)]\n    }));\n  }, []);\n  if (step === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"whisper-flow\",\n      style: {\n        background: `linear-gradient(135deg, ${theme.soft1} 0%, ${theme.soft2} 100%)`\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"hero-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"hero-quote\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: QUOTES[quoteIdx]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Share your story and make a difference\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"cta-button\",\n          onClick: () => setStep(1),\n          style: {\n            background: `linear-gradient(135deg, ${theme.accent} 0%, ${theme.accent}dd 100%)`\n          },\n          children: [/*#__PURE__*/_jsxDEV(Send, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 13\n          }, this), \"Whisper a Message\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"floating-elements\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"floating-icon\",\n          style: {\n            left: '10%',\n            top: '20%',\n            animationDelay: '0s'\n          },\n          children: /*#__PURE__*/_jsxDEV(Sparkles, {\n            size: 24,\n            style: {\n              color: theme.accent\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"floating-icon\",\n          style: {\n            left: '85%',\n            top: '15%',\n            animationDelay: '1s'\n          },\n          children: /*#__PURE__*/_jsxDEV(Star, {\n            size: 20,\n            style: {\n              color: theme.accent\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"floating-icon\",\n          style: {\n            left: '15%',\n            top: '70%',\n            animationDelay: '2s'\n          },\n          children: /*#__PURE__*/_jsxDEV(Zap, {\n            size: 22,\n            style: {\n              color: theme.accent\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"floating-icon\",\n          style: {\n            left: '80%',\n            top: '75%',\n            animationDelay: '3s'\n          },\n          children: /*#__PURE__*/_jsxDEV(Globe, {\n            size: 18,\n            style: {\n              color: theme.accent\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"floating-icon\",\n          style: {\n            left: '90%',\n            top: '50%',\n            animationDelay: '4s'\n          },\n          children: /*#__PURE__*/_jsxDEV(Shield, {\n            size: 16,\n            style: {\n              color: theme.accent\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"people-images\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"person-image\",\n          style: {\n            left: '5%',\n            top: '30%',\n            animationDelay: '0.5s'\n          },\n          children: /*#__PURE__*/_jsxDEV(Users, {\n            size: 32,\n            style: {\n              color: theme.accent\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"person-image\",\n          style: {\n            left: '75%',\n            top: '25%',\n            animationDelay: '1.5s'\n          },\n          children: /*#__PURE__*/_jsxDEV(Heart, {\n            size: 28,\n            style: {\n              color: theme.accent\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"person-image\",\n          style: {\n            left: '20%',\n            top: '80%',\n            animationDelay: '2.5s'\n          },\n          children: /*#__PURE__*/_jsxDEV(Gift, {\n            size: 30,\n            style: {\n              color: theme.accent\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 7\n    }, this);\n  }\n  if (step === 1) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"whisper-flow\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"step-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"back-button\",\n            onClick: () => setStep(0),\n            children: /*#__PURE__*/_jsxDEV(ArrowLeft, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"step-indicator\",\n            children: \"Step 1 of 4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"What's your story?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Share a message that will inspire others to give\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-input-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: message,\n              onChange: e => setMessage(e.target.value),\n              placeholder: \"Tell us why this cause matters to you...\",\n              className: \"message-input\",\n              rows: 6\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: `voice-button ${listening ? 'listening' : ''}`,\n                onClick: listening ? stopListening : startListening,\n                disabled: !recognitionRef.current,\n                children: [/*#__PURE__*/_jsxDEV(Mic, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 425,\n                  columnNumber: 19\n                }, this), listening ? 'Listening...' : 'Voice']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 420,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"char-count\",\n                children: [message.length, \"/500\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 428,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 13\n          }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-message\",\n            role: \"alert\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"next-button\",\n            onClick: () => setStep(2),\n            disabled: !message.trim(),\n            children: [\"Continue\", /*#__PURE__*/_jsxDEV(ArrowRight, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 7\n    }, this);\n  }\n  if (step === 2) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"whisper-flow\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"step-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"back-button\",\n            onClick: () => setStep(1),\n            children: /*#__PURE__*/_jsxDEV(ArrowLeft, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 454,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"step-indicator\",\n            children: \"Step 2 of 4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Choose your amount\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Select how much you'd like to donate\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"amount-options\",\n            children: [[5, 10, 25, 50, 100].map(amt => /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `amount-option ${amount === amt ? 'selected' : ''}`,\n              onClick: () => setAmount(amt),\n              children: [\"$\", amt]\n            }, amt, true, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 17\n            }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `amount-option ${amount === 'other' ? 'selected' : ''}`,\n              onClick: () => setAmount('other'),\n              children: \"Other\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 473,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 13\n          }, this), amount === 'other' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"other-amount-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"other-amount\",\n              children: \"Enter amount:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"other-amount\",\n              type: \"number\",\n              value: otherAmount,\n              onChange: e => setOtherAmount(e.target.value),\n              placeholder: \"0.00\",\n              min: \"0.01\",\n              step: \"0.01\",\n              className: \"other-amount-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 484,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 15\n          }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-message\",\n            role: \"alert\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 497,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"next-button\",\n            onClick: () => setStep(3),\n            disabled: !amount && !otherAmount,\n            children: [\"Continue\", /*#__PURE__*/_jsxDEV(ArrowRight, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 7\n    }, this);\n  }\n  if (step === 3) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"whisper-flow\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"step-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"back-button\",\n            onClick: () => setStep(2),\n            children: /*#__PURE__*/_jsxDEV(ArrowLeft, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 519,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 518,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"step-indicator\",\n            children: \"Step 3 of 4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 521,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 517,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Review your donation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 525,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Make sure everything looks right before you give\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 526,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"review-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"review-message\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Your Message\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 530,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"\\\"\", message, \"\\\"\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 531,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 529,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"review-amount\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Amount\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 535,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"$\", amount === 'other' ? otherAmount : amount]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 536,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 534,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"review-visibility\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Visibility\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 540,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"visibility-toggle\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `toggle-option ${isPublic ? 'selected' : ''}`,\n                  onClick: () => setIsPublic(true),\n                  children: [/*#__PURE__*/_jsxDEV(Eye, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 546,\n                    columnNumber: 21\n                  }, this), \"Public\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 542,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `toggle-option ${!isPublic ? 'selected' : ''}`,\n                  onClick: () => setIsPublic(false),\n                  children: [/*#__PURE__*/_jsxDEV(EyeOff, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 553,\n                    columnNumber: 21\n                  }, this), \"Anonymous\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 549,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 541,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 539,\n              columnNumber: 15\n            }, this), isPublic && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"email-input\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"email\",\n                children: \"Email (optional, for receipt)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 561,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"email\",\n                type: \"email\",\n                value: email,\n                onChange: e => setEmail(e.target.value),\n                placeholder: \"your@email.com\",\n                className: \"email-field\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 562,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 560,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 528,\n            columnNumber: 13\n          }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-message\",\n            role: \"alert\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 574,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"next-button\",\n            onClick: handleSubmit,\n            children: [\"Send my words and support\", /*#__PURE__*/_jsxDEV(Send, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 581,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 576,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 524,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 515,\n      columnNumber: 7\n    }, this);\n  }\n  if (step === 4) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"whisper-flow\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"step-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"back-button\",\n            onClick: () => setStep(3),\n            children: /*#__PURE__*/_jsxDEV(ArrowLeft, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 595,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 594,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"step-indicator\",\n            children: \"Step 4 of 4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 597,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 593,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Choose payment method\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 601,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Select how you'd like to complete your donation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 602,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"payment-options\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"option-button primary\",\n              onClick: startRlusdXamanFromWhisper,\n              children: [/*#__PURE__*/_jsxDEV(Heart, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 609,\n                columnNumber: 17\n              }, this), \"RLUSD (XAMAN)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 605,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"option-button\",\n              onClick: startRlusdCrossmarkFromWhisper,\n              disabled: crossmarkBusy,\n              children: crossmarkBusy ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spinner\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 620,\n                  columnNumber: 21\n                }, this), \"Opening\\u2026\"]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Heart, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 625,\n                  columnNumber: 21\n                }, this), \"RLUSD (CROSSMARK)\"]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 613,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"option-button\",\n              onClick: startFiatTransaction,\n              disabled: fiatState.phase === 'processing',\n              children: fiatState.phase === 'processing' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spinner\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 638,\n                  columnNumber: 21\n                }, this), \"Processing\\u2026\"]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(CreditCard, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 643,\n                  columnNumber: 21\n                }, this), \"Fiat Payment (USD)\"]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 631,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 604,\n            columnNumber: 13\n          }, this), crossmarkError && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-message\",\n            role: \"alert\",\n            children: crossmarkError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 650,\n            columnNumber: 32\n          }, this), fiatState.phase === 'error' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-message\",\n            role: \"alert\",\n            children: fiatState.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 651,\n            columnNumber: 45\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 600,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 592,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 591,\n      columnNumber: 7\n    }, this);\n  }\n  if (step === 5) {\n    return /*#__PURE__*/_jsxDEV(DonationConfirmation, {\n      message: message,\n      amount: amount === 'other' ? Number(otherAmount) : Number(amount),\n      transactionHash: xamanState.phase === 'completed' ? xamanState.txid : fiatState.phase === 'completed' ? fiatState.txid : undefined,\n      transactionUrl: transactionUrl || undefined,\n      isPublic: isPublic,\n      onReturnHome: () => window.location.href = '/'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 660,\n      columnNumber: 7\n    }, this);\n  }\n  return null;\n};\n_s2(WhisperFlow, \"qkw1voFWOaWHghMdPkgWZZb8uj8=\", false, function () {\n  return [useReducedMotion];\n});\n_c = WhisperFlow;\nexport default WhisperFlow;\nvar _c;\n$RefreshReg$(_c, \"WhisperFlow\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","xamanCreatePayment","isCrossmarkAvailable","connectCrossmark","signRlusdPaymentWithCrossmark","DonationConfirmation","Heart","Mic","ArrowLeft","ArrowRight","Eye","EyeOff","Sparkles","Star","Zap","Globe","Shield","Users","Gift","Send","CreditCard","jsxDEV","_jsxDEV","Fragment","_Fragment","DRAFT_KEY","PENDING_KEY","QUOTES","STORY_THEME","meda","accent","soft1","soft2","tara","ocean","saveDraft","data","localStorage","setItem","JSON","stringify","loadDraft","parse","getItem","getPendingDonation","clearPendingDonation","removeItem","useReducedMotion","_s","reduced","setReduced","m","window","matchMedia","matches","handler","e","addEventListener","addListener","removeEventListener","removeListener","vibrate","ms","navigator","WhisperFlow","_s2","step","setStep","message","setMessage","amount","setAmount","otherAmount","setOtherAmount","isPublic","setIsPublic","email","setEmail","submitting","setSubmitting","error","setError","showUndo","setShowUndo","undoTimerRef","quoteIdx","setQuoteIdx","showConfetti","setShowConfetti","transactionUrl","setTransactionUrl","xamanState","setXamanState","phase","countdown","setCountdown","xamanPollRef","crossmarkBusy","setCrossmarkBusy","crossmarkError","setCrossmarkError","fiatState","setFiatState","MEDA_ADDRESS","process","env","REACT_APP_MEDA_WALLET_ADDRESS","RLUSD_ISSUER","reducedMotion","listening","setListening","recognitionRef","searchParams","URLSearchParams","location","search","storyId","get","toLowerCase","prefillAmount","prefillMessage","theme","draft","pending","numAmount","Number","interval","setInterval","prev","length","clearInterval","SpeechRecognition","webkitSpeechRecognition","current","continuous","interimResults","lang","onresult","event","transcript","results","onerror","console","onend","startListening","start","stopListening","stop","handleSubmit","trim","handleUndo","clearTimeout","startRlusdXamanFromWhisper","response","destination","charity","cause_id","asset","issuer","success","payloadId","qrCode","countdownInterval","txid","Date","now","toString","slice","setTimeout","startRlusdCrossmarkFromWhisper","causeId","startFiatTransaction","Promise","resolve","pieces","Array","from","_","i","left","Math","random","bottom","background","floor","className","style","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","size","top","animationDelay","color","value","onChange","target","placeholder","rows","disabled","role","map","amt","htmlFor","id","type","min","transactionHash","undefined","onReturnHome","href","_c","$RefreshReg$"],"sources":["C:/Users/Alex Salsali/Desktop/Eunoia-Atlas-POC/frontend/src/components/WhisperFlow.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { xamanCreatePayment } from '../services/api';\nimport { checkUserPaymentStatus } from '../services/userWalletService';\nimport { isCrossmarkAvailable, connectCrossmark, signRlusdPaymentWithCrossmark } from '../services/crossmarkService';\nimport QRModal from './common/QRModal';\nimport DonationConfirmation from './DonationConfirmation';\nimport { Heart, MessageSquare, Mic, ArrowLeft, ArrowRight, CheckCircle2, Eye, EyeOff, Sparkles, Star, Zap, Globe, Shield, Users, Gift, Send, CreditCard, DollarSign } from 'lucide-react';\nimport './WhisperFlow.css';\n\n// Helpers\nconst DRAFT_KEY = 'whisperDraftV1';\nconst PENDING_KEY = 'whisperPendingDonationV1';\nconst QUOTES = [\n  '\"Sometimes a few words can carry a lifetime.\"',\n  '\"A small gift can change a whole day.\"',\n  '\"Light grows where we speak hope.\"',\n  '\"Your words have power beyond measure.\"',\n  '\"Every whisper of kindness echoes forever.\"',\n];\n\nconst STORY_THEME: Record<string, { accent: string; soft1: string; soft2: string }> = {\n  meda: { accent: '#7c3aed', soft1: '#ede9fe', soft2: '#faf5ff' },\n  tara: { accent: '#ec4899', soft1: '#ffe4f1', soft2: '#fff7fb' },\n  ocean: { accent: '#2563eb', soft1: '#dbeafe', soft2: '#eff6ff' },\n};\n\nfunction saveDraft(data: any) { try { localStorage.setItem(DRAFT_KEY, JSON.stringify(data)); } catch {} }\nfunction loadDraft(): any | null { try { return JSON.parse(localStorage.getItem(DRAFT_KEY) || 'null'); } catch { return null; } }\n\nfunction getPendingDonation(): any | null { try { return JSON.parse(localStorage.getItem(PENDING_KEY) || 'null'); } catch { return null; } }\nfunction clearPendingDonation() { try { localStorage.removeItem(PENDING_KEY); } catch {} }\n\nfunction useReducedMotion() {\n  const [reduced, setReduced] = useState(false);\n  useEffect(() => {\n    const m = window.matchMedia('(prefers-reduced-motion: reduce)');\n    setReduced(m.matches);\n    const handler = (e: MediaQueryListEvent) => setReduced(e.matches);\n    if (m.addEventListener) m.addEventListener('change', handler);\n    else m.addListener(handler as any);\n    return () => {\n      if (m.removeEventListener) m.removeEventListener('change', handler);\n      else m.removeListener(handler as any);\n    };\n  }, []);\n  return reduced;\n}\n\nfunction vibrate(ms = 10) { try { if (navigator.vibrate) navigator.vibrate(ms); } catch {} }\n\nconst WhisperFlow: React.FC = () => {\n  const [step, setStep] = useState<number>(0);\n\n  // data\n  const [message, setMessage] = useState('');\n  const [amount, setAmount] = useState<number | 'other' | ''>('');\n  const [otherAmount, setOtherAmount] = useState<string>('');\n  const [isPublic, setIsPublic] = useState<boolean>(false);\n  const [email, setEmail] = useState<string>('');\n\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const [showUndo, setShowUndo] = useState<boolean>(false);\n  const undoTimerRef = useRef<number | null>(null);\n  const [quoteIdx, setQuoteIdx] = useState(0);\n  const [showConfetti, setShowConfetti] = useState(false);\n  const [transactionUrl, setTransactionUrl] = useState<string | null>(null);\n  const [xamanState, setXamanState] = useState<\n    | { phase: 'idle' }\n    | { phase: 'creating' }\n    | { phase: 'ready'; payloadId: string; qrCode?: string; message?: string }\n    | { phase: 'completed'; txid?: string }\n    | { phase: 'error'; message: string }\n  >({ phase: 'idle' });\n  const [countdown, setCountdown] = useState<number>(0);\n  const xamanPollRef = useRef<number | null>(null);\n  const [crossmarkBusy, setCrossmarkBusy] = useState(false);\n  const [crossmarkError, setCrossmarkError] = useState<string | null>(null);\n\n  // Fiat transaction state\n  const [fiatState, setFiatState] = useState<\n    | { phase: 'idle' }\n    | { phase: 'processing' }\n    | { phase: 'completed'; txid?: string }\n    | { phase: 'error'; message: string }\n  >({ phase: 'idle' });\n\n  const MEDA_ADDRESS = (process.env.REACT_APP_MEDA_WALLET_ADDRESS as string) || 'rEtpfxtsuHGWbRYFGszE5etYNPaiogDpxC';\n  const RLUSD_ISSUER = 'rQhWct2fv4Vc4KRjRgMrxa8xPN9Zx9iLKV';\n\n  const reducedMotion = useReducedMotion();\n\n  // Voice\n  const [listening, setListening] = useState(false);\n  const recognitionRef = useRef<any>(null);\n\n  // Deep link\n  const searchParams = useMemo(() => new URLSearchParams(window.location.search), []);\n  const storyId = (searchParams.get('story') || '').toLowerCase();\n  const prefillAmount = searchParams.get('amount');\n  const prefillMessage = searchParams.get('message');\n\n  // Theme\n  const theme = STORY_THEME[storyId] || STORY_THEME['meda'];\n\n  useEffect(() => {\n    // Load draft if exists\n    const draft = loadDraft();\n    if (draft) {\n      setMessage(draft.message || '');\n      setAmount(draft.amount || '');\n      setOtherAmount(draft.otherAmount || '');\n      setIsPublic(draft.isPublic || false);\n      setEmail(draft.email || '');\n    }\n\n    // Check for pending donation\n    const pending = getPendingDonation();\n    if (pending) {\n      setMessage(pending.message || '');\n      setAmount(pending.amount || '');\n      setOtherAmount(pending.otherAmount || '');\n      setIsPublic(pending.isPublic || false);\n      setEmail(pending.email || '');\n      setStep(4);\n    }\n\n    // Prefill from URL params\n    if (prefillAmount) {\n      const numAmount = Number(prefillAmount);\n      if (numAmount > 0) {\n        setAmount(numAmount);\n      }\n    }\n    if (prefillMessage) {\n      setMessage(prefillMessage);\n    }\n\n    // Auto-advance if we have prefill data\n    if (prefillAmount || prefillMessage) {\n      setStep(1);\n    }\n  }, [prefillAmount, prefillMessage]);\n\n  // Save draft on changes\n  useEffect(() => {\n    if (step > 0) {\n      saveDraft({\n        message,\n        amount,\n        otherAmount,\n        isPublic,\n        email,\n      });\n    }\n  }, [message, amount, otherAmount, isPublic, email, step]);\n\n  // Auto-advance quote\n  useEffect(() => {\n    if (step === 0) {\n      const interval = setInterval(() => {\n        setQuoteIdx(prev => (prev + 1) % QUOTES.length);\n      }, 4000);\n      return () => clearInterval(interval);\n    }\n  }, [step]);\n\n  // Voice recognition setup\n  useEffect(() => {\n    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {\n      const SpeechRecognition = (window as any).webkitSpeechRecognition || (window as any).SpeechRecognition;\n      recognitionRef.current = new SpeechRecognition();\n      recognitionRef.current.continuous = false;\n      recognitionRef.current.interimResults = false;\n      recognitionRef.current.lang = 'en-US';\n\n      recognitionRef.current.onresult = (event: any) => {\n        const transcript = event.results[0][0].transcript;\n        setMessage(prev => prev + ' ' + transcript);\n        setListening(false);\n        vibrate();\n      };\n\n      recognitionRef.current.onerror = (event: any) => {\n        console.error('Speech recognition error:', event.error);\n        setListening(false);\n      };\n\n      recognitionRef.current.onend = () => {\n        setListening(false);\n      };\n    }\n  }, []);\n\n  const startListening = () => {\n    if (recognitionRef.current) {\n      recognitionRef.current.start();\n      setListening(true);\n      vibrate();\n    }\n  };\n\n  const stopListening = () => {\n    if (recognitionRef.current) {\n      recognitionRef.current.stop();\n      setListening(false);\n    }\n  };\n\n  const handleSubmit = () => {\n    if (!message.trim()) {\n      setError('Please enter your message');\n      return;\n    }\n    if (!amount && !otherAmount) {\n      setError('Please select an amount');\n      return;\n    }\n    setError(null);\n    setStep(4);\n  };\n\n  const handleUndo = () => {\n    setStep(3);\n    setShowUndo(false);\n    if (undoTimerRef.current) {\n      clearTimeout(undoTimerRef.current);\n      undoTimerRef.current = null;\n    }\n  };\n\n  const startRlusdXamanFromWhisper = async () => {\n    try {\n      setXamanState({ phase: 'creating' });\n      \n      const response = await xamanCreatePayment({\n        destination: MEDA_ADDRESS,\n        amount: 1,\n        charity: 'MEDA',\n        cause_id: 'whisper_rlusd',\n        asset: 'RLUSD',\n        issuer: RLUSD_ISSUER\n      });\n\n      if (response.success && response.payloadId) {\n        setXamanState({ \n          phase: 'ready', \n          payloadId: response.payloadId,\n          qrCode: response.qrCode\n        });\n\n        // Auto-confirmation for demo (10 seconds)\n        setCountdown(10);\n        const countdownInterval = setInterval(() => {\n          setCountdown(prev => {\n            if (prev <= 1) {\n              clearInterval(countdownInterval);\n              setXamanState({ \n                phase: 'completed', \n                txid: 'demo-tx-' + Date.now().toString().slice(-8)\n              });\n              setTransactionUrl('https://testnet.xrpl.org/transactions/demo-tx-' + Date.now().toString().slice(-8));\n              setShowConfetti(true);\n              setTimeout(() => setShowConfetti(false), 2000);\n              setStep(5);\n              return 0;\n            }\n            return prev - 1;\n          });\n        }, 1000);\n      } else {\n        setXamanState({ phase: 'error', message: 'Failed to create payment' });\n      }\n    } catch (error) {\n      console.error('Error creating Xaman payment:', error);\n      setXamanState({ phase: 'error', message: 'Failed to create payment' });\n    }\n  };\n\n  const startRlusdCrossmarkFromWhisper = async () => {\n    try {\n      setCrossmarkBusy(true);\n      setCrossmarkError(null);\n\n      if (!isCrossmarkAvailable()) {\n        setCrossmarkError('Crossmark wallet not available. Please install Crossmark extension.');\n        return;\n      }\n\n      await connectCrossmark();\n      const txid = await signRlusdPaymentWithCrossmark({\n        destination: MEDA_ADDRESS,\n        amount: 1,\n        charity: 'MEDA',\n        causeId: 'whisper_rlusd',\n        issuer: RLUSD_ISSUER\n      });\n\n      if (txid) {\n        setTransactionUrl(`https://testnet.xrpl.org/transactions/${txid}`);\n        setShowConfetti(true);\n        setTimeout(() => setShowConfetti(false), 2000);\n        setStep(5);\n      } else {\n        setCrossmarkError('Payment failed. Please try again.');\n      }\n    } catch (error) {\n      console.error('Crossmark payment error:', error);\n      setCrossmarkError('Payment failed. Please try again.');\n    } finally {\n      setCrossmarkBusy(false);\n    }\n  };\n\n  const startFiatTransaction = async () => {\n    try {\n      setFiatState({ phase: 'processing' });\n      \n      // Simulate fiat transaction processing\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      \n      const txid = 'fiat-tx-' + Date.now().toString().slice(-8);\n      setFiatState({ phase: 'completed', txid });\n      setTransactionUrl(`https://testnet.xrpl.org/transactions/${txid}`);\n      setShowConfetti(true);\n      setTimeout(() => setShowConfetti(false), 2000);\n      setStep(5);\n    } catch (error) {\n      console.error('Fiat transaction error:', error);\n      setFiatState({ phase: 'error', message: 'Fiat transaction failed. Please try again.' });\n    }\n  };\n\n  const pieces = useMemo(() => {\n    return Array.from({ length: 50 }, (_, i) => ({\n      left: Math.random() * 100,\n      bottom: Math.random() * 100,\n      background: ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#ffeaa7', '#dda0dd', '#98d8c8'][Math.floor(Math.random() * 7)]\n    }));\n  }, []);\n\n  if (step === 0) {\n    return (\n      <div className=\"whisper-flow\" style={{ background: `linear-gradient(135deg, ${theme.soft1} 0%, ${theme.soft2} 100%)` }}>\n        <div className=\"hero-content\">\n          <div className=\"hero-quote\">\n            <h1>{QUOTES[quoteIdx]}</h1>\n            <p>Share your story and make a difference</p>\n          </div>\n          <button \n            className=\"cta-button\"\n            onClick={() => setStep(1)}\n            style={{ background: `linear-gradient(135deg, ${theme.accent} 0%, ${theme.accent}dd 100%)` }}\n          >\n            <Send size={20} />\n            Whisper a Message\n          </button>\n        </div>\n\n        {/* Floating elements */}\n        <div className=\"floating-elements\">\n          <div className=\"floating-icon\" style={{ left: '10%', top: '20%', animationDelay: '0s' }}>\n            <Sparkles size={24} style={{ color: theme.accent }} />\n          </div>\n          <div className=\"floating-icon\" style={{ left: '85%', top: '15%', animationDelay: '1s' }}>\n            <Star size={20} style={{ color: theme.accent }} />\n          </div>\n          <div className=\"floating-icon\" style={{ left: '15%', top: '70%', animationDelay: '2s' }}>\n            <Zap size={22} style={{ color: theme.accent }} />\n          </div>\n          <div className=\"floating-icon\" style={{ left: '80%', top: '75%', animationDelay: '3s' }}>\n            <Globe size={18} style={{ color: theme.accent }} />\n          </div>\n          <div className=\"floating-icon\" style={{ left: '90%', top: '50%', animationDelay: '4s' }}>\n            <Shield size={16} style={{ color: theme.accent }} />\n          </div>\n        </div>\n\n        {/* People in need images */}\n        <div className=\"people-images\">\n          <div className=\"person-image\" style={{ left: '5%', top: '30%', animationDelay: '0.5s' }}>\n            <Users size={32} style={{ color: theme.accent }} />\n          </div>\n          <div className=\"person-image\" style={{ left: '75%', top: '25%', animationDelay: '1.5s' }}>\n            <Heart size={28} style={{ color: theme.accent }} />\n          </div>\n          <div className=\"person-image\" style={{ left: '20%', top: '80%', animationDelay: '2.5s' }}>\n            <Gift size={30} style={{ color: theme.accent }} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (step === 1) {\n    return (\n      <div className=\"whisper-flow\">\n        <div className=\"step-container\">\n          <div className=\"step-header\">\n            <button className=\"back-button\" onClick={() => setStep(0)}>\n              <ArrowLeft size={20} />\n            </button>\n            <div className=\"step-indicator\">Step 1 of 4</div>\n          </div>\n          \n          <div className=\"step-content\">\n            <h2>What's your story?</h2>\n            <p>Share a message that will inspire others to give</p>\n            \n            <div className=\"message-input-container\">\n              <textarea\n                value={message}\n                onChange={(e) => setMessage(e.target.value)}\n                placeholder=\"Tell us why this cause matters to you...\"\n                className=\"message-input\"\n                rows={6}\n              />\n              <div className=\"input-actions\">\n                <button \n                  className={`voice-button ${listening ? 'listening' : ''}`}\n                  onClick={listening ? stopListening : startListening}\n                  disabled={!recognitionRef.current}\n                >\n                  <Mic size={16} />\n                  {listening ? 'Listening...' : 'Voice'}\n                </button>\n                <div className=\"char-count\">{message.length}/500</div>\n              </div>\n            </div>\n\n            {error && <div className=\"error-message\" role=\"alert\">{error}</div>}\n            \n            <button \n              className=\"next-button\"\n              onClick={() => setStep(2)}\n              disabled={!message.trim()}\n            >\n              Continue\n              <ArrowRight size={16} />\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (step === 2) {\n    return (\n      <div className=\"whisper-flow\">\n        <div className=\"step-container\">\n          <div className=\"step-header\">\n            <button className=\"back-button\" onClick={() => setStep(1)}>\n              <ArrowLeft size={20} />\n            </button>\n            <div className=\"step-indicator\">Step 2 of 4</div>\n          </div>\n          \n          <div className=\"step-content\">\n            <h2>Choose your amount</h2>\n            <p>Select how much you'd like to donate</p>\n            \n            <div className=\"amount-options\">\n              {[5, 10, 25, 50, 100].map((amt) => (\n                <button\n                  key={amt}\n                  className={`amount-option ${amount === amt ? 'selected' : ''}`}\n                  onClick={() => setAmount(amt)}\n                >\n                  ${amt}\n                </button>\n              ))}\n              <button\n                className={`amount-option ${amount === 'other' ? 'selected' : ''}`}\n                onClick={() => setAmount('other')}\n              >\n                Other\n              </button>\n            </div>\n\n            {amount === 'other' && (\n              <div className=\"other-amount-container\">\n                <label htmlFor=\"other-amount\">Enter amount:</label>\n                <input\n                  id=\"other-amount\"\n                  type=\"number\"\n                  value={otherAmount}\n                  onChange={(e) => setOtherAmount(e.target.value)}\n                  placeholder=\"0.00\"\n                  min=\"0.01\"\n                  step=\"0.01\"\n                  className=\"other-amount-input\"\n                />\n              </div>\n            )}\n\n            {error && <div className=\"error-message\" role=\"alert\">{error}</div>}\n            \n            <button \n              className=\"next-button\"\n              onClick={() => setStep(3)}\n              disabled={!amount && !otherAmount}\n            >\n              Continue\n              <ArrowRight size={16} />\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (step === 3) {\n    return (\n      <div className=\"whisper-flow\">\n        <div className=\"step-container\">\n          <div className=\"step-header\">\n            <button className=\"back-button\" onClick={() => setStep(2)}>\n              <ArrowLeft size={20} />\n            </button>\n            <div className=\"step-indicator\">Step 3 of 4</div>\n          </div>\n          \n          <div className=\"step-content\">\n            <h2>Review your donation</h2>\n            <p>Make sure everything looks right before you give</p>\n            \n            <div className=\"review-card\">\n              <div className=\"review-message\">\n                <h3>Your Message</h3>\n                <p>\"{message}\"</p>\n              </div>\n              \n              <div className=\"review-amount\">\n                <h3>Amount</h3>\n                <p>${amount === 'other' ? otherAmount : amount}</p>\n              </div>\n\n              <div className=\"review-visibility\">\n                <h3>Visibility</h3>\n                <div className=\"visibility-toggle\">\n                  <button\n                    className={`toggle-option ${isPublic ? 'selected' : ''}`}\n                    onClick={() => setIsPublic(true)}\n                  >\n                    <Eye size={16} />\n                    Public\n                  </button>\n                  <button\n                    className={`toggle-option ${!isPublic ? 'selected' : ''}`}\n                    onClick={() => setIsPublic(false)}\n                  >\n                    <EyeOff size={16} />\n                    Anonymous\n                  </button>\n                </div>\n              </div>\n\n              {isPublic && (\n                <div className=\"email-input\">\n                  <label htmlFor=\"email\">Email (optional, for receipt)</label>\n                  <input\n                    id=\"email\"\n                    type=\"email\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                    placeholder=\"your@email.com\"\n                    className=\"email-field\"\n                  />\n                </div>\n              )}\n            </div>\n\n            {error && <div className=\"error-message\" role=\"alert\">{error}</div>}\n            \n            <button \n              className=\"next-button\"\n              onClick={handleSubmit}\n            >\n              Send my words and support\n              <Send size={16} />\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (step === 4) {\n    return (\n      <div className=\"whisper-flow\">\n        <div className=\"step-container\">\n          <div className=\"step-header\">\n            <button className=\"back-button\" onClick={() => setStep(3)}>\n              <ArrowLeft size={20} />\n            </button>\n            <div className=\"step-indicator\">Step 4 of 4</div>\n          </div>\n          \n          <div className=\"step-content\">\n            <h2>Choose payment method</h2>\n            <p>Select how you'd like to complete your donation</p>\n            \n            <div className=\"payment-options\">\n              <button \n                className=\"option-button primary\" \n                onClick={startRlusdXamanFromWhisper}\n              >\n                <Heart size={16} />\n                RLUSD (XAMAN)\n              </button>\n              \n              <button \n                className=\"option-button\" \n                onClick={startRlusdCrossmarkFromWhisper} \n                disabled={crossmarkBusy}\n              >\n                {crossmarkBusy ? (\n                  <>\n                    <div className=\"spinner\" />\n                    Opening\n                  </>\n                ) : (\n                  <>\n                    <Heart size={16} />\n                    RLUSD (CROSSMARK)\n                  </>\n                )}\n              </button>\n\n              <button \n                className=\"option-button\" \n                onClick={startFiatTransaction}\n                disabled={fiatState.phase === 'processing'}\n              >\n                {fiatState.phase === 'processing' ? (\n                  <>\n                    <div className=\"spinner\" />\n                    Processing\n                  </>\n                ) : (\n                  <>\n                    <CreditCard size={16} />\n                    Fiat Payment (USD)\n                  </>\n                )}\n              </button>\n            </div>\n            \n            {crossmarkError && <div className=\"error-message\" role=\"alert\">{crossmarkError}</div>}\n            {fiatState.phase === 'error' && <div className=\"error-message\" role=\"alert\">{fiatState.message}</div>}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (step === 5) {\n    return (\n      <DonationConfirmation\n        message={message}\n        amount={amount === 'other' ? Number(otherAmount) : Number(amount)}\n        transactionHash={xamanState.phase === 'completed' ? xamanState.txid : fiatState.phase === 'completed' ? fiatState.txid : undefined}\n        transactionUrl={transactionUrl || undefined}\n        isPublic={isPublic}\n        onReturnHome={() => window.location.href = '/'}\n      />\n    );\n  }\n\n  return null;\n};\n\nexport default WhisperFlow;\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,OAAO,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AACnE,SAASC,kBAAkB,QAAQ,iBAAiB;AAEpD,SAASC,oBAAoB,EAAEC,gBAAgB,EAAEC,6BAA6B,QAAQ,8BAA8B;AAEpH,OAAOC,oBAAoB,MAAM,wBAAwB;AACzD,SAASC,KAAK,EAAiBC,GAAG,EAAEC,SAAS,EAAEC,UAAU,EAAgBC,GAAG,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,IAAI,EAAEC,GAAG,EAAEC,KAAK,EAAEC,MAAM,EAAEC,KAAK,EAAEC,IAAI,EAAEC,IAAI,EAAEC,UAAU,QAAoB,cAAc;AACzL,OAAO,mBAAmB;;AAE1B;AAAA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AACA,MAAMC,SAAS,GAAG,gBAAgB;AAClC,MAAMC,WAAW,GAAG,0BAA0B;AAC9C,MAAMC,MAAM,GAAG,CACb,+CAA+C,EAC/C,wCAAwC,EACxC,oCAAoC,EACpC,yCAAyC,EACzC,6CAA6C,CAC9C;AAED,MAAMC,WAA6E,GAAG;EACpFC,IAAI,EAAE;IAAEC,MAAM,EAAE,SAAS;IAAEC,KAAK,EAAE,SAAS;IAAEC,KAAK,EAAE;EAAU,CAAC;EAC/DC,IAAI,EAAE;IAAEH,MAAM,EAAE,SAAS;IAAEC,KAAK,EAAE,SAAS;IAAEC,KAAK,EAAE;EAAU,CAAC;EAC/DE,KAAK,EAAE;IAAEJ,MAAM,EAAE,SAAS;IAAEC,KAAK,EAAE,SAAS;IAAEC,KAAK,EAAE;EAAU;AACjE,CAAC;AAED,SAASG,SAASA,CAACC,IAAS,EAAE;EAAE,IAAI;IAAEC,YAAY,CAACC,OAAO,CAACb,SAAS,EAAEc,IAAI,CAACC,SAAS,CAACJ,IAAI,CAAC,CAAC;EAAE,CAAC,CAAC,MAAM,CAAC;AAAE;AACxG,SAASK,SAASA,CAAA,EAAe;EAAE,IAAI;IAAE,OAAOF,IAAI,CAACG,KAAK,CAACL,YAAY,CAACM,OAAO,CAAClB,SAAS,CAAC,IAAI,MAAM,CAAC;EAAE,CAAC,CAAC,MAAM;IAAE,OAAO,IAAI;EAAE;AAAE;AAEhI,SAASmB,kBAAkBA,CAAA,EAAe;EAAE,IAAI;IAAE,OAAOL,IAAI,CAACG,KAAK,CAACL,YAAY,CAACM,OAAO,CAACjB,WAAW,CAAC,IAAI,MAAM,CAAC;EAAE,CAAC,CAAC,MAAM;IAAE,OAAO,IAAI;EAAE;AAAE;AAC3I,SAASmB,oBAAoBA,CAAA,EAAG;EAAE,IAAI;IAAER,YAAY,CAACS,UAAU,CAACpB,WAAW,CAAC;EAAE,CAAC,CAAC,MAAM,CAAC;AAAE;AAEzF,SAASqB,gBAAgBA,CAAA,EAAG;EAAAC,EAAA;EAC1B,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGlD,QAAQ,CAAC,KAAK,CAAC;EAC7CH,SAAS,CAAC,MAAM;IACd,MAAMsD,CAAC,GAAGC,MAAM,CAACC,UAAU,CAAC,kCAAkC,CAAC;IAC/DH,UAAU,CAACC,CAAC,CAACG,OAAO,CAAC;IACrB,MAAMC,OAAO,GAAIC,CAAsB,IAAKN,UAAU,CAACM,CAAC,CAACF,OAAO,CAAC;IACjE,IAAIH,CAAC,CAACM,gBAAgB,EAAEN,CAAC,CAACM,gBAAgB,CAAC,QAAQ,EAAEF,OAAO,CAAC,CAAC,KACzDJ,CAAC,CAACO,WAAW,CAACH,OAAc,CAAC;IAClC,OAAO,MAAM;MACX,IAAIJ,CAAC,CAACQ,mBAAmB,EAAER,CAAC,CAACQ,mBAAmB,CAAC,QAAQ,EAAEJ,OAAO,CAAC,CAAC,KAC/DJ,CAAC,CAACS,cAAc,CAACL,OAAc,CAAC;IACvC,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EACN,OAAON,OAAO;AAChB;AAACD,EAAA,CAdQD,gBAAgB;AAgBzB,SAASc,OAAOA,CAACC,EAAE,GAAG,EAAE,EAAE;EAAE,IAAI;IAAE,IAAIC,SAAS,CAACF,OAAO,EAAEE,SAAS,CAACF,OAAO,CAACC,EAAE,CAAC;EAAE,CAAC,CAAC,MAAM,CAAC;AAAE;AAE3F,MAAME,WAAqB,GAAGA,CAAA,KAAM;EAAAC,GAAA;EAClC,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGnE,QAAQ,CAAS,CAAC,CAAC;;EAE3C;EACA,MAAM,CAACoE,OAAO,EAAEC,UAAU,CAAC,GAAGrE,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACsE,MAAM,EAAEC,SAAS,CAAC,GAAGvE,QAAQ,CAAwB,EAAE,CAAC;EAC/D,MAAM,CAACwE,WAAW,EAAEC,cAAc,CAAC,GAAGzE,QAAQ,CAAS,EAAE,CAAC;EAC1D,MAAM,CAAC0E,QAAQ,EAAEC,WAAW,CAAC,GAAG3E,QAAQ,CAAU,KAAK,CAAC;EACxD,MAAM,CAAC4E,KAAK,EAAEC,QAAQ,CAAC,GAAG7E,QAAQ,CAAS,EAAE,CAAC;EAE9C,MAAM,CAAC8E,UAAU,EAAEC,aAAa,CAAC,GAAG/E,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAACgF,KAAK,EAAEC,QAAQ,CAAC,GAAGjF,QAAQ,CAAgB,IAAI,CAAC;EAEvD,MAAM,CAACkF,QAAQ,EAAEC,WAAW,CAAC,GAAGnF,QAAQ,CAAU,KAAK,CAAC;EACxD,MAAMoF,YAAY,GAAGrF,MAAM,CAAgB,IAAI,CAAC;EAChD,MAAM,CAACsF,QAAQ,EAAEC,WAAW,CAAC,GAAGtF,QAAQ,CAAC,CAAC,CAAC;EAC3C,MAAM,CAACuF,YAAY,EAAEC,eAAe,CAAC,GAAGxF,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAACyF,cAAc,EAAEC,iBAAiB,CAAC,GAAG1F,QAAQ,CAAgB,IAAI,CAAC;EACzE,MAAM,CAAC2F,UAAU,EAAEC,aAAa,CAAC,GAAG5F,QAAQ,CAM1C;IAAE6F,KAAK,EAAE;EAAO,CAAC,CAAC;EACpB,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAG/F,QAAQ,CAAS,CAAC,CAAC;EACrD,MAAMgG,YAAY,GAAGjG,MAAM,CAAgB,IAAI,CAAC;EAChD,MAAM,CAACkG,aAAa,EAAEC,gBAAgB,CAAC,GAAGlG,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAACmG,cAAc,EAAEC,iBAAiB,CAAC,GAAGpG,QAAQ,CAAgB,IAAI,CAAC;;EAEzE;EACA,MAAM,CAACqG,SAAS,EAAEC,YAAY,CAAC,GAAGtG,QAAQ,CAKxC;IAAE6F,KAAK,EAAE;EAAO,CAAC,CAAC;EAEpB,MAAMU,YAAY,GAAIC,OAAO,CAACC,GAAG,CAACC,6BAA6B,IAAe,oCAAoC;EAClH,MAAMC,YAAY,GAAG,oCAAoC;EAEzD,MAAMC,aAAa,GAAG7D,gBAAgB,CAAC,CAAC;;EAExC;EACA,MAAM,CAAC8D,SAAS,EAAEC,YAAY,CAAC,GAAG9G,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM+G,cAAc,GAAGhH,MAAM,CAAM,IAAI,CAAC;;EAExC;EACA,MAAMiH,YAAY,GAAGlH,OAAO,CAAC,MAAM,IAAImH,eAAe,CAAC7D,MAAM,CAAC8D,QAAQ,CAACC,MAAM,CAAC,EAAE,EAAE,CAAC;EACnF,MAAMC,OAAO,GAAG,CAACJ,YAAY,CAACK,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,EAAEC,WAAW,CAAC,CAAC;EAC/D,MAAMC,aAAa,GAAGP,YAAY,CAACK,GAAG,CAAC,QAAQ,CAAC;EAChD,MAAMG,cAAc,GAAGR,YAAY,CAACK,GAAG,CAAC,SAAS,CAAC;;EAElD;EACA,MAAMI,KAAK,GAAG7F,WAAW,CAACwF,OAAO,CAAC,IAAIxF,WAAW,CAAC,MAAM,CAAC;EAEzD/B,SAAS,CAAC,MAAM;IACd;IACA,MAAM6H,KAAK,GAAGjF,SAAS,CAAC,CAAC;IACzB,IAAIiF,KAAK,EAAE;MACTrD,UAAU,CAACqD,KAAK,CAACtD,OAAO,IAAI,EAAE,CAAC;MAC/BG,SAAS,CAACmD,KAAK,CAACpD,MAAM,IAAI,EAAE,CAAC;MAC7BG,cAAc,CAACiD,KAAK,CAAClD,WAAW,IAAI,EAAE,CAAC;MACvCG,WAAW,CAAC+C,KAAK,CAAChD,QAAQ,IAAI,KAAK,CAAC;MACpCG,QAAQ,CAAC6C,KAAK,CAAC9C,KAAK,IAAI,EAAE,CAAC;IAC7B;;IAEA;IACA,MAAM+C,OAAO,GAAG/E,kBAAkB,CAAC,CAAC;IACpC,IAAI+E,OAAO,EAAE;MACXtD,UAAU,CAACsD,OAAO,CAACvD,OAAO,IAAI,EAAE,CAAC;MACjCG,SAAS,CAACoD,OAAO,CAACrD,MAAM,IAAI,EAAE,CAAC;MAC/BG,cAAc,CAACkD,OAAO,CAACnD,WAAW,IAAI,EAAE,CAAC;MACzCG,WAAW,CAACgD,OAAO,CAACjD,QAAQ,IAAI,KAAK,CAAC;MACtCG,QAAQ,CAAC8C,OAAO,CAAC/C,KAAK,IAAI,EAAE,CAAC;MAC7BT,OAAO,CAAC,CAAC,CAAC;IACZ;;IAEA;IACA,IAAIoD,aAAa,EAAE;MACjB,MAAMK,SAAS,GAAGC,MAAM,CAACN,aAAa,CAAC;MACvC,IAAIK,SAAS,GAAG,CAAC,EAAE;QACjBrD,SAAS,CAACqD,SAAS,CAAC;MACtB;IACF;IACA,IAAIJ,cAAc,EAAE;MAClBnD,UAAU,CAACmD,cAAc,CAAC;IAC5B;;IAEA;IACA,IAAID,aAAa,IAAIC,cAAc,EAAE;MACnCrD,OAAO,CAAC,CAAC,CAAC;IACZ;EACF,CAAC,EAAE,CAACoD,aAAa,EAAEC,cAAc,CAAC,CAAC;;EAEnC;EACA3H,SAAS,CAAC,MAAM;IACd,IAAIqE,IAAI,GAAG,CAAC,EAAE;MACZ/B,SAAS,CAAC;QACRiC,OAAO;QACPE,MAAM;QACNE,WAAW;QACXE,QAAQ;QACRE;MACF,CAAC,CAAC;IACJ;EACF,CAAC,EAAE,CAACR,OAAO,EAAEE,MAAM,EAAEE,WAAW,EAAEE,QAAQ,EAAEE,KAAK,EAAEV,IAAI,CAAC,CAAC;;EAEzD;EACArE,SAAS,CAAC,MAAM;IACd,IAAIqE,IAAI,KAAK,CAAC,EAAE;MACd,MAAM4D,QAAQ,GAAGC,WAAW,CAAC,MAAM;QACjCzC,WAAW,CAAC0C,IAAI,IAAI,CAACA,IAAI,GAAG,CAAC,IAAIrG,MAAM,CAACsG,MAAM,CAAC;MACjD,CAAC,EAAE,IAAI,CAAC;MACR,OAAO,MAAMC,aAAa,CAACJ,QAAQ,CAAC;IACtC;EACF,CAAC,EAAE,CAAC5D,IAAI,CAAC,CAAC;;EAEV;EACArE,SAAS,CAAC,MAAM;IACd,IAAI,yBAAyB,IAAIuD,MAAM,IAAI,mBAAmB,IAAIA,MAAM,EAAE;MACxE,MAAM+E,iBAAiB,GAAI/E,MAAM,CAASgF,uBAAuB,IAAKhF,MAAM,CAAS+E,iBAAiB;MACtGpB,cAAc,CAACsB,OAAO,GAAG,IAAIF,iBAAiB,CAAC,CAAC;MAChDpB,cAAc,CAACsB,OAAO,CAACC,UAAU,GAAG,KAAK;MACzCvB,cAAc,CAACsB,OAAO,CAACE,cAAc,GAAG,KAAK;MAC7CxB,cAAc,CAACsB,OAAO,CAACG,IAAI,GAAG,OAAO;MAErCzB,cAAc,CAACsB,OAAO,CAACI,QAAQ,GAAIC,KAAU,IAAK;QAChD,MAAMC,UAAU,GAAGD,KAAK,CAACE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACD,UAAU;QACjDtE,UAAU,CAAC2D,IAAI,IAAIA,IAAI,GAAG,GAAG,GAAGW,UAAU,CAAC;QAC3C7B,YAAY,CAAC,KAAK,CAAC;QACnBjD,OAAO,CAAC,CAAC;MACX,CAAC;MAEDkD,cAAc,CAACsB,OAAO,CAACQ,OAAO,GAAIH,KAAU,IAAK;QAC/CI,OAAO,CAAC9D,KAAK,CAAC,2BAA2B,EAAE0D,KAAK,CAAC1D,KAAK,CAAC;QACvD8B,YAAY,CAAC,KAAK,CAAC;MACrB,CAAC;MAEDC,cAAc,CAACsB,OAAO,CAACU,KAAK,GAAG,MAAM;QACnCjC,YAAY,CAAC,KAAK,CAAC;MACrB,CAAC;IACH;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMkC,cAAc,GAAGA,CAAA,KAAM;IAC3B,IAAIjC,cAAc,CAACsB,OAAO,EAAE;MAC1BtB,cAAc,CAACsB,OAAO,CAACY,KAAK,CAAC,CAAC;MAC9BnC,YAAY,CAAC,IAAI,CAAC;MAClBjD,OAAO,CAAC,CAAC;IACX;EACF,CAAC;EAED,MAAMqF,aAAa,GAAGA,CAAA,KAAM;IAC1B,IAAInC,cAAc,CAACsB,OAAO,EAAE;MAC1BtB,cAAc,CAACsB,OAAO,CAACc,IAAI,CAAC,CAAC;MAC7BrC,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,MAAMsC,YAAY,GAAGA,CAAA,KAAM;IACzB,IAAI,CAAChF,OAAO,CAACiF,IAAI,CAAC,CAAC,EAAE;MACnBpE,QAAQ,CAAC,2BAA2B,CAAC;MACrC;IACF;IACA,IAAI,CAACX,MAAM,IAAI,CAACE,WAAW,EAAE;MAC3BS,QAAQ,CAAC,yBAAyB,CAAC;MACnC;IACF;IACAA,QAAQ,CAAC,IAAI,CAAC;IACdd,OAAO,CAAC,CAAC,CAAC;EACZ,CAAC;EAED,MAAMmF,UAAU,GAAGA,CAAA,KAAM;IACvBnF,OAAO,CAAC,CAAC,CAAC;IACVgB,WAAW,CAAC,KAAK,CAAC;IAClB,IAAIC,YAAY,CAACiD,OAAO,EAAE;MACxBkB,YAAY,CAACnE,YAAY,CAACiD,OAAO,CAAC;MAClCjD,YAAY,CAACiD,OAAO,GAAG,IAAI;IAC7B;EACF,CAAC;EAED,MAAMmB,0BAA0B,GAAG,MAAAA,CAAA,KAAY;IAC7C,IAAI;MACF5D,aAAa,CAAC;QAAEC,KAAK,EAAE;MAAW,CAAC,CAAC;MAEpC,MAAM4D,QAAQ,GAAG,MAAMxJ,kBAAkB,CAAC;QACxCyJ,WAAW,EAAEnD,YAAY;QACzBjC,MAAM,EAAE,CAAC;QACTqF,OAAO,EAAE,MAAM;QACfC,QAAQ,EAAE,eAAe;QACzBC,KAAK,EAAE,OAAO;QACdC,MAAM,EAAEnD;MACV,CAAC,CAAC;MAEF,IAAI8C,QAAQ,CAACM,OAAO,IAAIN,QAAQ,CAACO,SAAS,EAAE;QAC1CpE,aAAa,CAAC;UACZC,KAAK,EAAE,OAAO;UACdmE,SAAS,EAAEP,QAAQ,CAACO,SAAS;UAC7BC,MAAM,EAAER,QAAQ,CAACQ;QACnB,CAAC,CAAC;;QAEF;QACAlE,YAAY,CAAC,EAAE,CAAC;QAChB,MAAMmE,iBAAiB,GAAGnC,WAAW,CAAC,MAAM;UAC1ChC,YAAY,CAACiC,IAAI,IAAI;YACnB,IAAIA,IAAI,IAAI,CAAC,EAAE;cACbE,aAAa,CAACgC,iBAAiB,CAAC;cAChCtE,aAAa,CAAC;gBACZC,KAAK,EAAE,WAAW;gBAClBsE,IAAI,EAAE,UAAU,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC;cACnD,CAAC,CAAC;cACF7E,iBAAiB,CAAC,gDAAgD,GAAG0E,IAAI,CAACC,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;cACrG/E,eAAe,CAAC,IAAI,CAAC;cACrBgF,UAAU,CAAC,MAAMhF,eAAe,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC;cAC9CrB,OAAO,CAAC,CAAC,CAAC;cACV,OAAO,CAAC;YACV;YACA,OAAO6D,IAAI,GAAG,CAAC;UACjB,CAAC,CAAC;QACJ,CAAC,EAAE,IAAI,CAAC;MACV,CAAC,MAAM;QACLpC,aAAa,CAAC;UAAEC,KAAK,EAAE,OAAO;UAAEzB,OAAO,EAAE;QAA2B,CAAC,CAAC;MACxE;IACF,CAAC,CAAC,OAAOY,KAAK,EAAE;MACd8D,OAAO,CAAC9D,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;MACrDY,aAAa,CAAC;QAAEC,KAAK,EAAE,OAAO;QAAEzB,OAAO,EAAE;MAA2B,CAAC,CAAC;IACxE;EACF,CAAC;EAED,MAAMqG,8BAA8B,GAAG,MAAAA,CAAA,KAAY;IACjD,IAAI;MACFvE,gBAAgB,CAAC,IAAI,CAAC;MACtBE,iBAAiB,CAAC,IAAI,CAAC;MAEvB,IAAI,CAAClG,oBAAoB,CAAC,CAAC,EAAE;QAC3BkG,iBAAiB,CAAC,qEAAqE,CAAC;QACxF;MACF;MAEA,MAAMjG,gBAAgB,CAAC,CAAC;MACxB,MAAMgK,IAAI,GAAG,MAAM/J,6BAA6B,CAAC;QAC/CsJ,WAAW,EAAEnD,YAAY;QACzBjC,MAAM,EAAE,CAAC;QACTqF,OAAO,EAAE,MAAM;QACfe,OAAO,EAAE,eAAe;QACxBZ,MAAM,EAAEnD;MACV,CAAC,CAAC;MAEF,IAAIwD,IAAI,EAAE;QACRzE,iBAAiB,CAAC,yCAAyCyE,IAAI,EAAE,CAAC;QAClE3E,eAAe,CAAC,IAAI,CAAC;QACrBgF,UAAU,CAAC,MAAMhF,eAAe,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC;QAC9CrB,OAAO,CAAC,CAAC,CAAC;MACZ,CAAC,MAAM;QACLiC,iBAAiB,CAAC,mCAAmC,CAAC;MACxD;IACF,CAAC,CAAC,OAAOpB,KAAK,EAAE;MACd8D,OAAO,CAAC9D,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAChDoB,iBAAiB,CAAC,mCAAmC,CAAC;IACxD,CAAC,SAAS;MACRF,gBAAgB,CAAC,KAAK,CAAC;IACzB;EACF,CAAC;EAED,MAAMyE,oBAAoB,GAAG,MAAAA,CAAA,KAAY;IACvC,IAAI;MACFrE,YAAY,CAAC;QAAET,KAAK,EAAE;MAAa,CAAC,CAAC;;MAErC;MACA,MAAM,IAAI+E,OAAO,CAACC,OAAO,IAAIL,UAAU,CAACK,OAAO,EAAE,IAAI,CAAC,CAAC;MAEvD,MAAMV,IAAI,GAAG,UAAU,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC;MACzDjE,YAAY,CAAC;QAAET,KAAK,EAAE,WAAW;QAAEsE;MAAK,CAAC,CAAC;MAC1CzE,iBAAiB,CAAC,yCAAyCyE,IAAI,EAAE,CAAC;MAClE3E,eAAe,CAAC,IAAI,CAAC;MACrBgF,UAAU,CAAC,MAAMhF,eAAe,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC;MAC9CrB,OAAO,CAAC,CAAC,CAAC;IACZ,CAAC,CAAC,OAAOa,KAAK,EAAE;MACd8D,OAAO,CAAC9D,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/CsB,YAAY,CAAC;QAAET,KAAK,EAAE,OAAO;QAAEzB,OAAO,EAAE;MAA6C,CAAC,CAAC;IACzF;EACF,CAAC;EAED,MAAM0G,MAAM,GAAGhL,OAAO,CAAC,MAAM;IAC3B,OAAOiL,KAAK,CAACC,IAAI,CAAC;MAAE/C,MAAM,EAAE;IAAG,CAAC,EAAE,CAACgD,CAAC,EAAEC,CAAC,MAAM;MAC3CC,IAAI,EAAEC,IAAI,CAACC,MAAM,CAAC,CAAC,GAAG,GAAG;MACzBC,MAAM,EAAEF,IAAI,CAACC,MAAM,CAAC,CAAC,GAAG,GAAG;MAC3BE,UAAU,EAAE,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC,CAACH,IAAI,CAACI,KAAK,CAACJ,IAAI,CAACC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC;IACzH,CAAC,CAAC,CAAC;EACL,CAAC,EAAE,EAAE,CAAC;EAEN,IAAInH,IAAI,KAAK,CAAC,EAAE;IACd,oBACE5C,OAAA;MAAKmK,SAAS,EAAC,cAAc;MAACC,KAAK,EAAE;QAAEH,UAAU,EAAE,2BAA2B9D,KAAK,CAAC1F,KAAK,QAAQ0F,KAAK,CAACzF,KAAK;MAAS,CAAE;MAAA2J,QAAA,gBACrHrK,OAAA;QAAKmK,SAAS,EAAC,cAAc;QAAAE,QAAA,gBAC3BrK,OAAA;UAAKmK,SAAS,EAAC,YAAY;UAAAE,QAAA,gBACzBrK,OAAA;YAAAqK,QAAA,EAAKhK,MAAM,CAAC0D,QAAQ;UAAC;YAAAuG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eAC3BzK,OAAA;YAAAqK,QAAA,EAAG;UAAsC;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1C,CAAC,eACNzK,OAAA;UACEmK,SAAS,EAAC,YAAY;UACtBO,OAAO,EAAEA,CAAA,KAAM7H,OAAO,CAAC,CAAC,CAAE;UAC1BuH,KAAK,EAAE;YAAEH,UAAU,EAAE,2BAA2B9D,KAAK,CAAC3F,MAAM,QAAQ2F,KAAK,CAAC3F,MAAM;UAAW,CAAE;UAAA6J,QAAA,gBAE7FrK,OAAA,CAACH,IAAI;YAAC8K,IAAI,EAAE;UAAG;YAAAL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,qBAEpB;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,eAGNzK,OAAA;QAAKmK,SAAS,EAAC,mBAAmB;QAAAE,QAAA,gBAChCrK,OAAA;UAAKmK,SAAS,EAAC,eAAe;UAACC,KAAK,EAAE;YAAEP,IAAI,EAAE,KAAK;YAAEe,GAAG,EAAE,KAAK;YAAEC,cAAc,EAAE;UAAK,CAAE;UAAAR,QAAA,eACtFrK,OAAA,CAACV,QAAQ;YAACqL,IAAI,EAAE,EAAG;YAACP,KAAK,EAAE;cAAEU,KAAK,EAAE3E,KAAK,CAAC3F;YAAO;UAAE;YAAA8J,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACnD,CAAC,eACNzK,OAAA;UAAKmK,SAAS,EAAC,eAAe;UAACC,KAAK,EAAE;YAAEP,IAAI,EAAE,KAAK;YAAEe,GAAG,EAAE,KAAK;YAAEC,cAAc,EAAE;UAAK,CAAE;UAAAR,QAAA,eACtFrK,OAAA,CAACT,IAAI;YAACoL,IAAI,EAAE,EAAG;YAACP,KAAK,EAAE;cAAEU,KAAK,EAAE3E,KAAK,CAAC3F;YAAO;UAAE;YAAA8J,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC/C,CAAC,eACNzK,OAAA;UAAKmK,SAAS,EAAC,eAAe;UAACC,KAAK,EAAE;YAAEP,IAAI,EAAE,KAAK;YAAEe,GAAG,EAAE,KAAK;YAAEC,cAAc,EAAE;UAAK,CAAE;UAAAR,QAAA,eACtFrK,OAAA,CAACR,GAAG;YAACmL,IAAI,EAAE,EAAG;YAACP,KAAK,EAAE;cAAEU,KAAK,EAAE3E,KAAK,CAAC3F;YAAO;UAAE;YAAA8J,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC9C,CAAC,eACNzK,OAAA;UAAKmK,SAAS,EAAC,eAAe;UAACC,KAAK,EAAE;YAAEP,IAAI,EAAE,KAAK;YAAEe,GAAG,EAAE,KAAK;YAAEC,cAAc,EAAE;UAAK,CAAE;UAAAR,QAAA,eACtFrK,OAAA,CAACP,KAAK;YAACkL,IAAI,EAAE,EAAG;YAACP,KAAK,EAAE;cAAEU,KAAK,EAAE3E,KAAK,CAAC3F;YAAO;UAAE;YAAA8J,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChD,CAAC,eACNzK,OAAA;UAAKmK,SAAS,EAAC,eAAe;UAACC,KAAK,EAAE;YAAEP,IAAI,EAAE,KAAK;YAAEe,GAAG,EAAE,KAAK;YAAEC,cAAc,EAAE;UAAK,CAAE;UAAAR,QAAA,eACtFrK,OAAA,CAACN,MAAM;YAACiL,IAAI,EAAE,EAAG;YAACP,KAAK,EAAE;cAAEU,KAAK,EAAE3E,KAAK,CAAC3F;YAAO;UAAE;YAAA8J,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjD,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAGNzK,OAAA;QAAKmK,SAAS,EAAC,eAAe;QAAAE,QAAA,gBAC5BrK,OAAA;UAAKmK,SAAS,EAAC,cAAc;UAACC,KAAK,EAAE;YAAEP,IAAI,EAAE,IAAI;YAAEe,GAAG,EAAE,KAAK;YAAEC,cAAc,EAAE;UAAO,CAAE;UAAAR,QAAA,eACtFrK,OAAA,CAACL,KAAK;YAACgL,IAAI,EAAE,EAAG;YAACP,KAAK,EAAE;cAAEU,KAAK,EAAE3E,KAAK,CAAC3F;YAAO;UAAE;YAAA8J,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChD,CAAC,eACNzK,OAAA;UAAKmK,SAAS,EAAC,cAAc;UAACC,KAAK,EAAE;YAAEP,IAAI,EAAE,KAAK;YAAEe,GAAG,EAAE,KAAK;YAAEC,cAAc,EAAE;UAAO,CAAE;UAAAR,QAAA,eACvFrK,OAAA,CAAChB,KAAK;YAAC2L,IAAI,EAAE,EAAG;YAACP,KAAK,EAAE;cAAEU,KAAK,EAAE3E,KAAK,CAAC3F;YAAO;UAAE;YAAA8J,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChD,CAAC,eACNzK,OAAA;UAAKmK,SAAS,EAAC,cAAc;UAACC,KAAK,EAAE;YAAEP,IAAI,EAAE,KAAK;YAAEe,GAAG,EAAE,KAAK;YAAEC,cAAc,EAAE;UAAO,CAAE;UAAAR,QAAA,eACvFrK,OAAA,CAACJ,IAAI;YAAC+K,IAAI,EAAE,EAAG;YAACP,KAAK,EAAE;cAAEU,KAAK,EAAE3E,KAAK,CAAC3F;YAAO;UAAE;YAAA8J,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC/C,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;EAEA,IAAI7H,IAAI,KAAK,CAAC,EAAE;IACd,oBACE5C,OAAA;MAAKmK,SAAS,EAAC,cAAc;MAAAE,QAAA,eAC3BrK,OAAA;QAAKmK,SAAS,EAAC,gBAAgB;QAAAE,QAAA,gBAC7BrK,OAAA;UAAKmK,SAAS,EAAC,aAAa;UAAAE,QAAA,gBAC1BrK,OAAA;YAAQmK,SAAS,EAAC,aAAa;YAACO,OAAO,EAAEA,CAAA,KAAM7H,OAAO,CAAC,CAAC,CAAE;YAAAwH,QAAA,eACxDrK,OAAA,CAACd,SAAS;cAACyL,IAAI,EAAE;YAAG;cAAAL,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACjB,CAAC,eACTzK,OAAA;YAAKmK,SAAS,EAAC,gBAAgB;YAAAE,QAAA,EAAC;UAAW;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC9C,CAAC,eAENzK,OAAA;UAAKmK,SAAS,EAAC,cAAc;UAAAE,QAAA,gBAC3BrK,OAAA;YAAAqK,QAAA,EAAI;UAAkB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC3BzK,OAAA;YAAAqK,QAAA,EAAG;UAAgD;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,eAEvDzK,OAAA;YAAKmK,SAAS,EAAC,yBAAyB;YAAAE,QAAA,gBACtCrK,OAAA;cACE+K,KAAK,EAAEjI,OAAQ;cACfkI,QAAQ,EAAG9I,CAAC,IAAKa,UAAU,CAACb,CAAC,CAAC+I,MAAM,CAACF,KAAK,CAAE;cAC5CG,WAAW,EAAC,0CAA0C;cACtDf,SAAS,EAAC,eAAe;cACzBgB,IAAI,EAAE;YAAE;cAAAb,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACT,CAAC,eACFzK,OAAA;cAAKmK,SAAS,EAAC,eAAe;cAAAE,QAAA,gBAC5BrK,OAAA;gBACEmK,SAAS,EAAE,gBAAgB5E,SAAS,GAAG,WAAW,GAAG,EAAE,EAAG;gBAC1DmF,OAAO,EAAEnF,SAAS,GAAGqC,aAAa,GAAGF,cAAe;gBACpD0D,QAAQ,EAAE,CAAC3F,cAAc,CAACsB,OAAQ;gBAAAsD,QAAA,gBAElCrK,OAAA,CAACf,GAAG;kBAAC0L,IAAI,EAAE;gBAAG;kBAAAL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,EAChBlF,SAAS,GAAG,cAAc,GAAG,OAAO;cAAA;gBAAA+E,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC/B,CAAC,eACTzK,OAAA;gBAAKmK,SAAS,EAAC,YAAY;gBAAAE,QAAA,GAAEvH,OAAO,CAAC6D,MAAM,EAAC,MAAI;cAAA;gBAAA2D,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACnD,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,EAEL/G,KAAK,iBAAI1D,OAAA;YAAKmK,SAAS,EAAC,eAAe;YAACkB,IAAI,EAAC,OAAO;YAAAhB,QAAA,EAAE3G;UAAK;YAAA4G,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAEnEzK,OAAA;YACEmK,SAAS,EAAC,aAAa;YACvBO,OAAO,EAAEA,CAAA,KAAM7H,OAAO,CAAC,CAAC,CAAE;YAC1BuI,QAAQ,EAAE,CAACtI,OAAO,CAACiF,IAAI,CAAC,CAAE;YAAAsC,QAAA,GAC3B,UAEC,eAAArK,OAAA,CAACb,UAAU;cAACwL,IAAI,EAAE;YAAG;cAAAL,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAClB,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;EAEA,IAAI7H,IAAI,KAAK,CAAC,EAAE;IACd,oBACE5C,OAAA;MAAKmK,SAAS,EAAC,cAAc;MAAAE,QAAA,eAC3BrK,OAAA;QAAKmK,SAAS,EAAC,gBAAgB;QAAAE,QAAA,gBAC7BrK,OAAA;UAAKmK,SAAS,EAAC,aAAa;UAAAE,QAAA,gBAC1BrK,OAAA;YAAQmK,SAAS,EAAC,aAAa;YAACO,OAAO,EAAEA,CAAA,KAAM7H,OAAO,CAAC,CAAC,CAAE;YAAAwH,QAAA,eACxDrK,OAAA,CAACd,SAAS;cAACyL,IAAI,EAAE;YAAG;cAAAL,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACjB,CAAC,eACTzK,OAAA;YAAKmK,SAAS,EAAC,gBAAgB;YAAAE,QAAA,EAAC;UAAW;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC9C,CAAC,eAENzK,OAAA;UAAKmK,SAAS,EAAC,cAAc;UAAAE,QAAA,gBAC3BrK,OAAA;YAAAqK,QAAA,EAAI;UAAkB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC3BzK,OAAA;YAAAqK,QAAA,EAAG;UAAoC;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,eAE3CzK,OAAA;YAAKmK,SAAS,EAAC,gBAAgB;YAAAE,QAAA,GAC5B,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,CAACiB,GAAG,CAAEC,GAAG,iBAC5BvL,OAAA;cAEEmK,SAAS,EAAE,iBAAiBnH,MAAM,KAAKuI,GAAG,GAAG,UAAU,GAAG,EAAE,EAAG;cAC/Db,OAAO,EAAEA,CAAA,KAAMzH,SAAS,CAACsI,GAAG,CAAE;cAAAlB,QAAA,GAC/B,GACE,EAACkB,GAAG;YAAA,GAJAA,GAAG;cAAAjB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAKF,CACT,CAAC,eACFzK,OAAA;cACEmK,SAAS,EAAE,iBAAiBnH,MAAM,KAAK,OAAO,GAAG,UAAU,GAAG,EAAE,EAAG;cACnE0H,OAAO,EAAEA,CAAA,KAAMzH,SAAS,CAAC,OAAO,CAAE;cAAAoH,QAAA,EACnC;YAED;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,EAELzH,MAAM,KAAK,OAAO,iBACjBhD,OAAA;YAAKmK,SAAS,EAAC,wBAAwB;YAAAE,QAAA,gBACrCrK,OAAA;cAAOwL,OAAO,EAAC,cAAc;cAAAnB,QAAA,EAAC;YAAa;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACnDzK,OAAA;cACEyL,EAAE,EAAC,cAAc;cACjBC,IAAI,EAAC,QAAQ;cACbX,KAAK,EAAE7H,WAAY;cACnB8H,QAAQ,EAAG9I,CAAC,IAAKiB,cAAc,CAACjB,CAAC,CAAC+I,MAAM,CAACF,KAAK,CAAE;cAChDG,WAAW,EAAC,MAAM;cAClBS,GAAG,EAAC,MAAM;cACV/I,IAAI,EAAC,MAAM;cACXuH,SAAS,EAAC;YAAoB;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC/B,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CACN,EAEA/G,KAAK,iBAAI1D,OAAA;YAAKmK,SAAS,EAAC,eAAe;YAACkB,IAAI,EAAC,OAAO;YAAAhB,QAAA,EAAE3G;UAAK;YAAA4G,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAEnEzK,OAAA;YACEmK,SAAS,EAAC,aAAa;YACvBO,OAAO,EAAEA,CAAA,KAAM7H,OAAO,CAAC,CAAC,CAAE;YAC1BuI,QAAQ,EAAE,CAACpI,MAAM,IAAI,CAACE,WAAY;YAAAmH,QAAA,GACnC,UAEC,eAAArK,OAAA,CAACb,UAAU;cAACwL,IAAI,EAAE;YAAG;cAAAL,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAClB,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;EAEA,IAAI7H,IAAI,KAAK,CAAC,EAAE;IACd,oBACE5C,OAAA;MAAKmK,SAAS,EAAC,cAAc;MAAAE,QAAA,eAC3BrK,OAAA;QAAKmK,SAAS,EAAC,gBAAgB;QAAAE,QAAA,gBAC7BrK,OAAA;UAAKmK,SAAS,EAAC,aAAa;UAAAE,QAAA,gBAC1BrK,OAAA;YAAQmK,SAAS,EAAC,aAAa;YAACO,OAAO,EAAEA,CAAA,KAAM7H,OAAO,CAAC,CAAC,CAAE;YAAAwH,QAAA,eACxDrK,OAAA,CAACd,SAAS;cAACyL,IAAI,EAAE;YAAG;cAAAL,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACjB,CAAC,eACTzK,OAAA;YAAKmK,SAAS,EAAC,gBAAgB;YAAAE,QAAA,EAAC;UAAW;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC9C,CAAC,eAENzK,OAAA;UAAKmK,SAAS,EAAC,cAAc;UAAAE,QAAA,gBAC3BrK,OAAA;YAAAqK,QAAA,EAAI;UAAoB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC7BzK,OAAA;YAAAqK,QAAA,EAAG;UAAgD;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,eAEvDzK,OAAA;YAAKmK,SAAS,EAAC,aAAa;YAAAE,QAAA,gBAC1BrK,OAAA;cAAKmK,SAAS,EAAC,gBAAgB;cAAAE,QAAA,gBAC7BrK,OAAA;gBAAAqK,QAAA,EAAI;cAAY;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACrBzK,OAAA;gBAAAqK,QAAA,GAAG,IAAC,EAACvH,OAAO,EAAC,IAAC;cAAA;gBAAAwH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACf,CAAC,eAENzK,OAAA;cAAKmK,SAAS,EAAC,eAAe;cAAAE,QAAA,gBAC5BrK,OAAA;gBAAAqK,QAAA,EAAI;cAAM;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACfzK,OAAA;gBAAAqK,QAAA,GAAG,GAAC,EAACrH,MAAM,KAAK,OAAO,GAAGE,WAAW,GAAGF,MAAM;cAAA;gBAAAsH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChD,CAAC,eAENzK,OAAA;cAAKmK,SAAS,EAAC,mBAAmB;cAAAE,QAAA,gBAChCrK,OAAA;gBAAAqK,QAAA,EAAI;cAAU;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACnBzK,OAAA;gBAAKmK,SAAS,EAAC,mBAAmB;gBAAAE,QAAA,gBAChCrK,OAAA;kBACEmK,SAAS,EAAE,iBAAiB/G,QAAQ,GAAG,UAAU,GAAG,EAAE,EAAG;kBACzDsH,OAAO,EAAEA,CAAA,KAAMrH,WAAW,CAAC,IAAI,CAAE;kBAAAgH,QAAA,gBAEjCrK,OAAA,CAACZ,GAAG;oBAACuL,IAAI,EAAE;kBAAG;oBAAAL,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,UAEnB;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,eACTzK,OAAA;kBACEmK,SAAS,EAAE,iBAAiB,CAAC/G,QAAQ,GAAG,UAAU,GAAG,EAAE,EAAG;kBAC1DsH,OAAO,EAAEA,CAAA,KAAMrH,WAAW,CAAC,KAAK,CAAE;kBAAAgH,QAAA,gBAElCrK,OAAA,CAACX,MAAM;oBAACsL,IAAI,EAAE;kBAAG;oBAAAL,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,aAEtB;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,EAELrH,QAAQ,iBACPpD,OAAA;cAAKmK,SAAS,EAAC,aAAa;cAAAE,QAAA,gBAC1BrK,OAAA;gBAAOwL,OAAO,EAAC,OAAO;gBAAAnB,QAAA,EAAC;cAA6B;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eAC5DzK,OAAA;gBACEyL,EAAE,EAAC,OAAO;gBACVC,IAAI,EAAC,OAAO;gBACZX,KAAK,EAAEzH,KAAM;gBACb0H,QAAQ,EAAG9I,CAAC,IAAKqB,QAAQ,CAACrB,CAAC,CAAC+I,MAAM,CAACF,KAAK,CAAE;gBAC1CG,WAAW,EAAC,gBAAgB;gBAC5Bf,SAAS,EAAC;cAAa;gBAAAG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACxB,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC,CACN;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC,EAEL/G,KAAK,iBAAI1D,OAAA;YAAKmK,SAAS,EAAC,eAAe;YAACkB,IAAI,EAAC,OAAO;YAAAhB,QAAA,EAAE3G;UAAK;YAAA4G,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAEnEzK,OAAA;YACEmK,SAAS,EAAC,aAAa;YACvBO,OAAO,EAAE5C,YAAa;YAAAuC,QAAA,GACvB,2BAEC,eAAArK,OAAA,CAACH,IAAI;cAAC8K,IAAI,EAAE;YAAG;cAAAL,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACZ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;EAEA,IAAI7H,IAAI,KAAK,CAAC,EAAE;IACd,oBACE5C,OAAA;MAAKmK,SAAS,EAAC,cAAc;MAAAE,QAAA,eAC3BrK,OAAA;QAAKmK,SAAS,EAAC,gBAAgB;QAAAE,QAAA,gBAC7BrK,OAAA;UAAKmK,SAAS,EAAC,aAAa;UAAAE,QAAA,gBAC1BrK,OAAA;YAAQmK,SAAS,EAAC,aAAa;YAACO,OAAO,EAAEA,CAAA,KAAM7H,OAAO,CAAC,CAAC,CAAE;YAAAwH,QAAA,eACxDrK,OAAA,CAACd,SAAS;cAACyL,IAAI,EAAE;YAAG;cAAAL,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACjB,CAAC,eACTzK,OAAA;YAAKmK,SAAS,EAAC,gBAAgB;YAAAE,QAAA,EAAC;UAAW;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC9C,CAAC,eAENzK,OAAA;UAAKmK,SAAS,EAAC,cAAc;UAAAE,QAAA,gBAC3BrK,OAAA;YAAAqK,QAAA,EAAI;UAAqB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC9BzK,OAAA;YAAAqK,QAAA,EAAG;UAA+C;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,eAEtDzK,OAAA;YAAKmK,SAAS,EAAC,iBAAiB;YAAAE,QAAA,gBAC9BrK,OAAA;cACEmK,SAAS,EAAC,uBAAuB;cACjCO,OAAO,EAAExC,0BAA2B;cAAAmC,QAAA,gBAEpCrK,OAAA,CAAChB,KAAK;gBAAC2L,IAAI,EAAE;cAAG;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,iBAErB;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAETzK,OAAA;cACEmK,SAAS,EAAC,eAAe;cACzBO,OAAO,EAAEvB,8BAA+B;cACxCiC,QAAQ,EAAEzG,aAAc;cAAA0F,QAAA,EAEvB1F,aAAa,gBACZ3E,OAAA,CAAAE,SAAA;gBAAAmK,QAAA,gBACErK,OAAA;kBAAKmK,SAAS,EAAC;gBAAS;kBAAAG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,iBAE7B;cAAA,eAAE,CAAC,gBAEHzK,OAAA,CAAAE,SAAA;gBAAAmK,QAAA,gBACErK,OAAA,CAAChB,KAAK;kBAAC2L,IAAI,EAAE;gBAAG;kBAAAL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,qBAErB;cAAA,eAAE;YACH;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACK,CAAC,eAETzK,OAAA;cACEmK,SAAS,EAAC,eAAe;cACzBO,OAAO,EAAErB,oBAAqB;cAC9B+B,QAAQ,EAAErG,SAAS,CAACR,KAAK,KAAK,YAAa;cAAA8F,QAAA,EAE1CtF,SAAS,CAACR,KAAK,KAAK,YAAY,gBAC/BvE,OAAA,CAAAE,SAAA;gBAAAmK,QAAA,gBACErK,OAAA;kBAAKmK,SAAS,EAAC;gBAAS;kBAAAG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,oBAE7B;cAAA,eAAE,CAAC,gBAEHzK,OAAA,CAAAE,SAAA;gBAAAmK,QAAA,gBACErK,OAAA,CAACF,UAAU;kBAAC6K,IAAI,EAAE;gBAAG;kBAAAL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,sBAE1B;cAAA,eAAE;YACH;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACK,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,EAEL5F,cAAc,iBAAI7E,OAAA;YAAKmK,SAAS,EAAC,eAAe;YAACkB,IAAI,EAAC,OAAO;YAAAhB,QAAA,EAAExF;UAAc;YAAAyF,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,EACpF1F,SAAS,CAACR,KAAK,KAAK,OAAO,iBAAIvE,OAAA;YAAKmK,SAAS,EAAC,eAAe;YAACkB,IAAI,EAAC,OAAO;YAAAhB,QAAA,EAAEtF,SAAS,CAACjC;UAAO;YAAAwH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;EAEA,IAAI7H,IAAI,KAAK,CAAC,EAAE;IACd,oBACE5C,OAAA,CAACjB,oBAAoB;MACnB+D,OAAO,EAAEA,OAAQ;MACjBE,MAAM,EAAEA,MAAM,KAAK,OAAO,GAAGuD,MAAM,CAACrD,WAAW,CAAC,GAAGqD,MAAM,CAACvD,MAAM,CAAE;MAClE4I,eAAe,EAAEvH,UAAU,CAACE,KAAK,KAAK,WAAW,GAAGF,UAAU,CAACwE,IAAI,GAAG9D,SAAS,CAACR,KAAK,KAAK,WAAW,GAAGQ,SAAS,CAAC8D,IAAI,GAAGgD,SAAU;MACnI1H,cAAc,EAAEA,cAAc,IAAI0H,SAAU;MAC5CzI,QAAQ,EAAEA,QAAS;MACnB0I,YAAY,EAAEA,CAAA,KAAMhK,MAAM,CAAC8D,QAAQ,CAACmG,IAAI,GAAG;IAAI;MAAAzB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAChD,CAAC;EAEN;EAEA,OAAO,IAAI;AACb,CAAC;AAAC9H,GAAA,CA7mBID,WAAqB;EAAA,QAyCHjB,gBAAgB;AAAA;AAAAuK,EAAA,GAzClCtJ,WAAqB;AA+mB3B,eAAeA,WAAW;AAAC,IAAAsJ,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}