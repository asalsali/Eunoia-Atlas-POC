{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Alex Salsali\\\\Desktop\\\\Eunoia-Atlas-POC\\\\frontend\\\\src\\\\components\\\\WhisperFlow.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Heart, Mic, ArrowLeft, ArrowRight, Eye, EyeOff, Sparkles, Star, Zap, Globe, Shield, Users, Gift, Send, CreditCard } from 'lucide-react';\nimport { xamanCreatePayment } from '../services/api';\nimport { checkUserPaymentStatus } from '../services/userWalletService';\nimport { isCrossmarkAvailable, connectCrossmark, signRlusdPaymentWithCrossmark } from '../services/crossmarkService';\nimport DonationConfirmation from './DonationConfirmation';\nimport './WhisperFlow.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst QUOTES = ['\"Sometimes a few words can carry a lifetime.\"', '\"A small gift can change a whole day.\"', '\"Light grows where we speak hope.\"', '\"Your words have power beyond measure.\"', '\"Every whisper of kindness echoes forever.\"'];\nconst WhisperFlow = () => {\n  _s();\n  const [step, setStep] = useState(0);\n  const [message, setMessage] = useState('');\n  const [amount, setAmount] = useState('');\n  const [otherAmount, setOtherAmount] = useState('');\n  const [isPublic, setIsPublic] = useState(false);\n  const [email, setEmail] = useState('');\n  const [listening, setListening] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState(null);\n  const [quoteIdx, setQuoteIdx] = useState(0);\n  const [showConfetti, setShowConfetti] = useState(false);\n  const [transactionUrl, setTransactionUrl] = useState(null);\n  const [xamanState, setXamanState] = useState({\n    phase: 'idle'\n  });\n  const [fiatState, setFiatState] = useState({\n    phase: 'idle'\n  });\n  const [crossmarkBusy, setCrossmarkBusy] = useState(false);\n  const [crossmarkError, setCrossmarkError] = useState(null);\n  const [countdown, setCountdown] = useState(0);\n  const xamanPollRef = useRef(null);\n  const recognitionRef = useRef(null);\n  const navigate = useNavigate();\n  const MEDA_ADDRESS = 'r4jSjD22z6HtEu41eh1JrkD3KAW1PyM1RH';\n  const RLUSD_ISSUER = 'rQhWct2fv4Vc4KRjRgMrxa8xPN9Zx9iLKV';\n\n  // Quote rotation\n  useEffect(() => {\n    if (step === 0) {\n      const interval = setInterval(() => {\n        setQuoteIdx(prev => (prev + 1) % QUOTES.length);\n      }, 4000);\n      return () => clearInterval(interval);\n    }\n  }, [step]);\n\n  // Voice recognition setup\n  useEffect(() => {\n    if ('webkitSpeechRecognition' in window) {\n      recognitionRef.current = new window.webkitSpeechRecognition();\n      recognitionRef.current.continuous = false;\n      recognitionRef.current.interimResults = false;\n      recognitionRef.current.lang = 'en-US';\n      recognitionRef.current.onstart = () => setListening(true);\n      recognitionRef.current.onresult = event => {\n        const transcript = event.results[0][0].transcript;\n        setMessage(transcript);\n      };\n      recognitionRef.current.onerror = () => setListening(false);\n      recognitionRef.current.onend = () => setListening(false);\n    }\n  }, []);\n  const startListening = () => {\n    if (recognitionRef.current) {\n      recognitionRef.current.start();\n    }\n  };\n  const stopListening = () => {\n    if (recognitionRef.current) {\n      recognitionRef.current.stop();\n    }\n  };\n  const handleSubmit = async () => {\n    if (submitting) return;\n    setSubmitting(true);\n    setError(null);\n    const finalAmount = amount === 'other' ? Number(otherAmount) : Number(amount);\n    if (!finalAmount || finalAmount <= 0) {\n      setError('Please enter a valid amount');\n      setSubmitting(false);\n      return;\n    }\n\n    // Use the demo RLUSD flow (1 RLUSD fixed amount)\n    await startRlusdXamanFromWhisper();\n    setSubmitting(false);\n  };\n  const startRlusdXamanFromWhisper = async () => {\n    if (xamanState.phase !== 'idle') return;\n    setXamanState({\n      phase: 'creating'\n    });\n    try {\n      const response = await xamanCreatePayment({\n        destination: MEDA_ADDRESS,\n        amount: 1,\n        // Fixed 1 RLUSD like the demo\n        charity: 'MEDA',\n        cause_id: 'whisper_rlusd_demo',\n        asset: 'RLUSD',\n        issuer: RLUSD_ISSUER\n      });\n      if (response.success && response.payloadId) {\n        setXamanState({\n          phase: 'ready',\n          payloadId: response.payloadId,\n          qrCode: response.qrCode\n        });\n\n        // Auto-show confirmation after 10 seconds for demo purposes\n        setCountdown(10);\n        const countdownInterval = setInterval(() => {\n          setCountdown(prev => {\n            if (prev <= 1) {\n              clearInterval(countdownInterval);\n              if (xamanPollRef.current) clearInterval(xamanPollRef.current);\n              setXamanState({\n                phase: 'completed',\n                txid: 'demo-tx-' + Date.now().toString().slice(-8)\n              });\n              setTransactionUrl('https://testnet.xrpl.org/transactions/demo-tx-' + Date.now().toString().slice(-8));\n              setShowConfetti(true);\n              setTimeout(() => setShowConfetti(false), 2000);\n              setStep(5);\n              return 0;\n            }\n            return prev - 1;\n          });\n        }, 1000);\n\n        // Also add a backup timeout in case the interval fails\n        setTimeout(() => {\n          if (xamanPollRef.current) clearInterval(xamanPollRef.current);\n          setXamanState({\n            phase: 'completed',\n            txid: 'demo-tx-backup-' + Date.now().toString().slice(-8)\n          });\n          setTransactionUrl('https://testnet.xrpl.org/transactions/demo-tx-backup-' + Date.now().toString().slice(-8));\n          setShowConfetti(true);\n          setTimeout(() => setShowConfetti(false), 2000);\n          setStep(5);\n        }, 11000); // 11 seconds as backup\n\n        // Poll for completion (original logic - kept for real payments)\n        xamanPollRef.current = window.setInterval(async () => {\n          try {\n            const status = await checkUserPaymentStatus(response.payloadId);\n            if (status.completed) {\n              if (xamanPollRef.current) clearInterval(xamanPollRef.current);\n              setXamanState({\n                phase: 'completed',\n                txid: status.txid\n              });\n              setTransactionUrl(status.transactionUrl);\n              setShowConfetti(true);\n              setTimeout(() => setShowConfetti(false), 2000);\n              setStep(5);\n            }\n          } catch (error) {\n            console.error('Payment status check failed:', error);\n          }\n        }, 2000);\n      } else {\n        setXamanState({\n          phase: 'error',\n          message: 'Failed to create payment'\n        });\n      }\n    } catch (error) {\n      console.error('Xaman payment creation failed:', error);\n      setXamanState({\n        phase: 'error',\n        message: 'Failed to create payment'\n      });\n    }\n  };\n  const startRlusdCrossmarkFromWhisper = async () => {\n    if (crossmarkBusy) return;\n    setCrossmarkBusy(true);\n    setCrossmarkError(null);\n    try {\n      if (!isCrossmarkAvailable()) {\n        throw new Error('CROSSMARK extension not found');\n      }\n      await connectCrossmark();\n      const finalAmount = amount === 'other' ? Number(otherAmount) : Number(amount);\n      const result = await signRlusdPaymentWithCrossmark({\n        amount: finalAmount,\n        destination: MEDA_ADDRESS,\n        charity: 'MEDA',\n        causeId: 'whisper',\n        issuer: RLUSD_ISSUER\n      });\n      if (result.ok) {\n        setTransactionUrl(result.explorer || null);\n        setShowConfetti(true);\n        setTimeout(() => setShowConfetti(false), 2000);\n        setStep(5);\n      } else {\n        setCrossmarkError(result.error || 'Payment failed');\n      }\n    } catch (error) {\n      console.error('CROSSMARK payment failed:', error);\n      setCrossmarkError(error instanceof Error ? error.message : 'Payment failed');\n    } finally {\n      setCrossmarkBusy(false);\n    }\n  };\n  const startFiatTransaction = async () => {\n    try {\n      setFiatState({\n        phase: 'processing'\n      });\n\n      // Simulate fiat transaction processing\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      const txid = 'fiat-tx-' + Date.now().toString().slice(-8);\n      setFiatState({\n        phase: 'completed',\n        txid\n      });\n      setTransactionUrl(`https://testnet.xrpl.org/transactions/${txid}`);\n      setShowConfetti(true);\n      setTimeout(() => setShowConfetti(false), 2000);\n      setStep(5);\n    } catch (error) {\n      console.error('Fiat transaction error:', error);\n      setFiatState({\n        phase: 'error',\n        message: 'Fiat transaction failed. Please try again.'\n      });\n    }\n  };\n\n  // Step 0: Landing page with quotes\n  if (step === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"whisper\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"story-hero\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overlay\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"floating-elements\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"floating-icon\",\n            style: {\n              left: '10%',\n              top: '20%',\n              animationDelay: '0s'\n            },\n            children: /*#__PURE__*/_jsxDEV(Sparkles, {\n              size: 24\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"floating-icon\",\n            style: {\n              left: '85%',\n              top: '15%',\n              animationDelay: '1s'\n            },\n            children: /*#__PURE__*/_jsxDEV(Star, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"floating-icon\",\n            style: {\n              left: '15%',\n              top: '70%',\n              animationDelay: '2s'\n            },\n            children: /*#__PURE__*/_jsxDEV(Zap, {\n              size: 22\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"floating-icon\",\n            style: {\n              left: '80%',\n              top: '75%',\n              animationDelay: '3s'\n            },\n            children: /*#__PURE__*/_jsxDEV(Globe, {\n              size: 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"floating-icon\",\n            style: {\n              left: '90%',\n              top: '50%',\n              animationDelay: '4s'\n            },\n            children: /*#__PURE__*/_jsxDEV(Shield, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"people-images\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"person-image\",\n            style: {\n              left: '5%',\n              top: '30%',\n              animationDelay: '0.5s'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"image-placeholder\",\n              children: [/*#__PURE__*/_jsxDEV(Users, {\n                size: 32\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"image-caption\",\n                children: \"People in need\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"person-image\",\n            style: {\n              left: '75%',\n              top: '25%',\n              animationDelay: '1.5s'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"image-placeholder\",\n              children: [/*#__PURE__*/_jsxDEV(Heart, {\n                size: 28\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"image-caption\",\n                children: \"Your impact\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"person-image\",\n            style: {\n              left: '20%',\n              top: '80%',\n              animationDelay: '2.5s'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"image-placeholder\",\n              children: [/*#__PURE__*/_jsxDEV(Gift, {\n                size: 30\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"image-caption\",\n                children: \"Real change\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stage center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"hero-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"hero-quote quote-fade\",\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                children: QUOTES[quoteIdx]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Share your story and make a difference\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cta-button\",\n              onClick: () => setStep(1),\n              children: [/*#__PURE__*/_jsxDEV(Send, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 17\n              }, this), \"Whisper a Message\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Step 1: Message input\n  if (step === 1) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"whisper\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stage center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"back-button\",\n            onClick: () => setStep(0),\n            children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 15\n            }, this), \"Back\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"step-indicator\",\n            children: \"Step 1 of 4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"fade-in\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"prompt\",\n            children: \"What's your story?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"hint\",\n            children: \"Share a message that will inspire others to give\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: message,\n              onChange: e => setMessage(e.target.value),\n              placeholder: \"Tell us why this cause matters to you...\",\n              className: \"whisper-input\",\n              rows: 6,\n              maxLength: 500\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-footer\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: `mic-button ${listening ? 'listening' : ''}`,\n                onClick: listening ? stopListening : startListening,\n                disabled: !recognitionRef.current,\n                \"aria-pressed\": listening,\n                children: [/*#__PURE__*/_jsxDEV(Mic, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 356,\n                  columnNumber: 19\n                }, this), listening ? 'Listening...' : 'Voice']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"hint\",\n                children: [message.length, \"/500\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 359,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 13\n          }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-message\",\n            role: \"alert\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"primary-button\",\n            onClick: () => setStep(2),\n            disabled: !message.trim(),\n            children: [\"Continue\", /*#__PURE__*/_jsxDEV(ArrowRight, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Step 2: Amount selection\n  if (step === 2) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"whisper\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stage center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"back-button\",\n            onClick: () => setStep(1),\n            children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 15\n            }, this), \"Back\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"step-indicator\",\n            children: \"Step 2 of 4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"fade-in\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"prompt\",\n            children: \"Choose your amount\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"hint\",\n            children: \"Select how much you'd like to donate\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"amount-grid\",\n            children: [[5, 10, 25, 50, 100].map(amt => /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `amount-pill ${amount === amt ? 'selected' : ''}`,\n              onClick: () => setAmount(amt),\n              children: [\"$\", amt]\n            }, amt, true, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 17\n            }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `amount-pill ${amount === 'other' ? 'selected' : ''}`,\n              onClick: () => setAmount('other'),\n              children: \"Other\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 13\n          }, this), amount === 'other' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"other-amount-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              value: otherAmount,\n              onChange: e => setOtherAmount(e.target.value),\n              placeholder: \"Enter amount\",\n              min: \"0.01\",\n              step: \"0.01\",\n              className: \"other-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"apply-button\",\n              onClick: () => {\n                if (otherAmount && Number(otherAmount) > 0) {\n                  setAmount(Number(otherAmount));\n                }\n              },\n              disabled: !otherAmount || Number(otherAmount) <= 0,\n              children: \"Apply\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 15\n          }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-message\",\n            role: \"alert\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"primary-button\",\n            onClick: () => setStep(3),\n            disabled: !amount && !otherAmount,\n            children: [\"Continue\", /*#__PURE__*/_jsxDEV(ArrowRight, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Step 3: Review and visibility\n  if (step === 3) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"whisper\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stage center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"back-button\",\n            onClick: () => setStep(2),\n            children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 15\n            }, this), \"Back\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"step-indicator\",\n            children: \"Step 3 of 4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"fade-in\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"prompt\",\n            children: \"Review your donation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"hint\",\n            children: \"Make sure everything looks right before you give\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 470,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"summary-header\",\n              children: \"Your Whisper\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 473,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-preview\",\n              children: [\"\\\"\", message, \"\\\"\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 474,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"summary-details\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"summary-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Amount\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 477,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"amount\",\n                  children: [\"$\", amount === 'other' ? otherAmount : amount]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 478,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 472,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"identity-toggle\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: `toggle-button ${isPublic ? 'active' : ''}`,\n              onClick: () => setIsPublic(true),\n              children: [/*#__PURE__*/_jsxDEV(Eye, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 488,\n                columnNumber: 17\n              }, this), \"Public\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 484,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `toggle-button ${!isPublic ? 'active' : ''}`,\n              onClick: () => setIsPublic(false),\n              children: [/*#__PURE__*/_jsxDEV(EyeOff, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 17\n              }, this), \"Anonymous\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 13\n          }, this), isPublic && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"email-section\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              value: email,\n              onChange: e => setEmail(e.target.value),\n              placeholder: \"Email (optional, for receipt)\",\n              className: \"email-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 502,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"privacy-note\",\n            children: \"Your personal information is protected. Only your message and donation amount will be shared.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 512,\n            columnNumber: 13\n          }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-message\",\n            role: \"alert\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 516,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"primary-button\",\n            onClick: handleSubmit,\n            disabled: submitting,\n            children: [submitting ? 'Processing...' : 'Send my words and support', /*#__PURE__*/_jsxDEV(Send, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 524,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 518,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Step 4: Payment method selection\n  if (step === 4) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"whisper\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stage center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"back-button\",\n            onClick: () => setStep(3),\n            children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 539,\n              columnNumber: 15\n            }, this), \"Back\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 538,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"step-indicator\",\n            children: \"Step 4 of 4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 542,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"fade-in\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"prompt\",\n            children: \"Choose payment method\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 546,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"hint\",\n            children: \"Select how you'd like to complete your donation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 547,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"alternative-options\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"options-label\",\n              children: \"Payment Options\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"options-grid\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"option-button primary\",\n                onClick: startRlusdXamanFromWhisper,\n                disabled: xamanState.phase === 'creating',\n                children: xamanState.phase === 'creating' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"spinner\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 559,\n                    columnNumber: 23\n                  }, this), \"Creating...\"]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(Heart, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 564,\n                    columnNumber: 23\n                  }, this), \"RLUSD (XAMAN)\"]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 552,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"option-button\",\n                onClick: startRlusdCrossmarkFromWhisper,\n                disabled: crossmarkBusy,\n                children: crossmarkBusy ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"spinner\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 577,\n                    columnNumber: 23\n                  }, this), \"Opening\\u2026\"]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(Heart, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 582,\n                    columnNumber: 23\n                  }, this), \"RLUSD (CROSSMARK)\"]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 570,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"option-button\",\n                onClick: startFiatTransaction,\n                disabled: fiatState.phase === 'processing',\n                children: fiatState.phase === 'processing' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"spinner\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 595,\n                    columnNumber: 23\n                  }, this), \"Processing\\u2026\"]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(CreditCard, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 600,\n                    columnNumber: 23\n                  }, this), \"Fiat Payment (USD)\"]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 588,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 551,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 549,\n            columnNumber: 13\n          }, this), crossmarkError && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-message\",\n            role: \"alert\",\n            children: crossmarkError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 608,\n            columnNumber: 32\n          }, this), fiatState.phase === 'error' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-message\",\n            role: \"alert\",\n            children: fiatState.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 609,\n            columnNumber: 45\n          }, this), xamanState.phase === 'error' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-message\",\n            role: \"alert\",\n            children: xamanState.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 610,\n            columnNumber: 46\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 536,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 535,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Step 5: Confirmation\n  if (step === 5) {\n    return /*#__PURE__*/_jsxDEV(DonationConfirmation, {\n      message: message,\n      amount: amount === 'other' ? Number(otherAmount) : Number(amount),\n      transactionHash: xamanState.phase === 'completed' ? xamanState.txid : fiatState.phase === 'completed' ? fiatState.txid : undefined,\n      transactionUrl: transactionUrl || undefined,\n      isPublic: isPublic,\n      onReturnHome: () => window.location.href = '/'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 620,\n      columnNumber: 7\n    }, this);\n  }\n  return null;\n};\n_s(WhisperFlow, \"FaPSXcN6YkatmZGVq4ukE5VyywI=\", false, function () {\n  return [useNavigate];\n});\n_c = WhisperFlow;\nexport default WhisperFlow;\nvar _c;\n$RefreshReg$(_c, \"WhisperFlow\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","Heart","Mic","ArrowLeft","ArrowRight","Eye","EyeOff","Sparkles","Star","Zap","Globe","Shield","Users","Gift","Send","CreditCard","xamanCreatePayment","checkUserPaymentStatus","isCrossmarkAvailable","connectCrossmark","signRlusdPaymentWithCrossmark","DonationConfirmation","jsxDEV","_jsxDEV","Fragment","_Fragment","QUOTES","WhisperFlow","_s","step","setStep","message","setMessage","amount","setAmount","otherAmount","setOtherAmount","isPublic","setIsPublic","email","setEmail","listening","setListening","submitting","setSubmitting","error","setError","quoteIdx","setQuoteIdx","showConfetti","setShowConfetti","transactionUrl","setTransactionUrl","xamanState","setXamanState","phase","fiatState","setFiatState","crossmarkBusy","setCrossmarkBusy","crossmarkError","setCrossmarkError","countdown","setCountdown","xamanPollRef","recognitionRef","navigate","MEDA_ADDRESS","RLUSD_ISSUER","interval","setInterval","prev","length","clearInterval","window","current","webkitSpeechRecognition","continuous","interimResults","lang","onstart","onresult","event","transcript","results","onerror","onend","startListening","start","stopListening","stop","handleSubmit","finalAmount","Number","startRlusdXamanFromWhisper","response","destination","charity","cause_id","asset","issuer","success","payloadId","qrCode","countdownInterval","txid","Date","now","toString","slice","setTimeout","status","completed","console","startRlusdCrossmarkFromWhisper","Error","result","causeId","ok","explorer","startFiatTransaction","Promise","resolve","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","left","top","animationDelay","size","onClick","value","onChange","e","target","placeholder","rows","maxLength","disabled","role","trim","map","amt","type","min","transactionHash","undefined","onReturnHome","location","href","_c","$RefreshReg$"],"sources":["C:/Users/Alex Salsali/Desktop/Eunoia-Atlas-POC/frontend/src/components/WhisperFlow.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Heart, MessageSquare, Mic, ArrowLeft, ArrowRight, CheckCircle2, Eye, EyeOff, Sparkles, Star, Zap, Globe, Shield, Users, Gift, Send, CreditCard } from 'lucide-react';\nimport { xamanCreatePayment } from '../services/api';\nimport { checkUserPaymentStatus } from '../services/userWalletService';\nimport { isCrossmarkAvailable, connectCrossmark, signRlusdPaymentWithCrossmark } from '../services/crossmarkService';\nimport QRModal from './common/QRModal';\nimport DonationConfirmation from './DonationConfirmation';\nimport './WhisperFlow.css';\n\nconst QUOTES = [\n  '\"Sometimes a few words can carry a lifetime.\"',\n  '\"A small gift can change a whole day.\"',\n  '\"Light grows where we speak hope.\"',\n  '\"Your words have power beyond measure.\"',\n  '\"Every whisper of kindness echoes forever.\"',\n];\n\nconst WhisperFlow: React.FC = () => {\n  const [step, setStep] = useState(0);\n  const [message, setMessage] = useState('');\n  const [amount, setAmount] = useState<number | 'other' | ''>('');\n  const [otherAmount, setOtherAmount] = useState('');\n  const [isPublic, setIsPublic] = useState(false);\n  const [email, setEmail] = useState('');\n  const [listening, setListening] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [quoteIdx, setQuoteIdx] = useState(0);\n  const [showConfetti, setShowConfetti] = useState(false);\n  const [transactionUrl, setTransactionUrl] = useState<string | null>(null);\n  \n  const [xamanState, setXamanState] = useState<\n    | { phase: 'idle' }\n    | { phase: 'creating' }\n    | { phase: 'ready'; payloadId: string; qrCode?: string }\n    | { phase: 'completed'; txid?: string }\n    | { phase: 'error'; message: string }\n  >({ phase: 'idle' });\n\n  const [fiatState, setFiatState] = useState<\n    | { phase: 'idle' }\n    | { phase: 'processing' }\n    | { phase: 'completed'; txid?: string }\n    | { phase: 'error'; message: string }\n  >({ phase: 'idle' });\n\n  const [crossmarkBusy, setCrossmarkBusy] = useState(false);\n  const [crossmarkError, setCrossmarkError] = useState<string | null>(null);\n  const [countdown, setCountdown] = useState(0);\n  const xamanPollRef = useRef<number | null>(null);\n  const recognitionRef = useRef<any>(null);\n  const navigate = useNavigate();\n\n  const MEDA_ADDRESS = 'r4jSjD22z6HtEu41eh1JrkD3KAW1PyM1RH';\n  const RLUSD_ISSUER = 'rQhWct2fv4Vc4KRjRgMrxa8xPN9Zx9iLKV';\n\n  // Quote rotation\n  useEffect(() => {\n    if (step === 0) {\n      const interval = setInterval(() => {\n        setQuoteIdx((prev) => (prev + 1) % QUOTES.length);\n      }, 4000);\n      return () => clearInterval(interval);\n    }\n  }, [step]);\n\n  // Voice recognition setup\n  useEffect(() => {\n    if ('webkitSpeechRecognition' in window) {\n      recognitionRef.current = new (window as any).webkitSpeechRecognition();\n      recognitionRef.current.continuous = false;\n      recognitionRef.current.interimResults = false;\n      recognitionRef.current.lang = 'en-US';\n\n      recognitionRef.current.onstart = () => setListening(true);\n      recognitionRef.current.onresult = (event: any) => {\n        const transcript = event.results[0][0].transcript;\n        setMessage(transcript);\n      };\n      recognitionRef.current.onerror = () => setListening(false);\n      recognitionRef.current.onend = () => setListening(false);\n    }\n  }, []);\n\n  const startListening = () => {\n    if (recognitionRef.current) {\n      recognitionRef.current.start();\n    }\n  };\n\n  const stopListening = () => {\n    if (recognitionRef.current) {\n      recognitionRef.current.stop();\n    }\n  };\n\n  const handleSubmit = async () => {\n    if (submitting) return;\n    \n    setSubmitting(true);\n    setError(null);\n    \n    const finalAmount = amount === 'other' ? Number(otherAmount) : Number(amount);\n    \n    if (!finalAmount || finalAmount <= 0) {\n      setError('Please enter a valid amount');\n      setSubmitting(false);\n      return;\n    }\n\n    // Use the demo RLUSD flow (1 RLUSD fixed amount)\n    await startRlusdXamanFromWhisper();\n    setSubmitting(false);\n  };\n\n  const startRlusdXamanFromWhisper = async () => {\n    if (xamanState.phase !== 'idle') return;\n    \n    setXamanState({ phase: 'creating' });\n    \n    try {\n      const response = await xamanCreatePayment({\n        destination: MEDA_ADDRESS,\n        amount: 1, // Fixed 1 RLUSD like the demo\n        charity: 'MEDA',\n        cause_id: 'whisper_rlusd_demo',\n        asset: 'RLUSD',\n        issuer: RLUSD_ISSUER\n      });\n      \n      if (response.success && response.payloadId) {\n        setXamanState({ \n          phase: 'ready', \n          payloadId: response.payloadId,\n          qrCode: response.qrCode\n        });\n        \n        // Auto-show confirmation after 10 seconds for demo purposes\n        setCountdown(10);\n        const countdownInterval = setInterval(() => {\n          setCountdown(prev => {\n            if (prev <= 1) {\n              clearInterval(countdownInterval);\n              if (xamanPollRef.current) clearInterval(xamanPollRef.current);\n              setXamanState({ \n                phase: 'completed', \n                txid: 'demo-tx-' + Date.now().toString().slice(-8)\n              });\n              setTransactionUrl('https://testnet.xrpl.org/transactions/demo-tx-' + Date.now().toString().slice(-8));\n              setShowConfetti(true);\n              setTimeout(() => setShowConfetti(false), 2000);\n              setStep(5);\n              return 0;\n            }\n            return prev - 1;\n          });\n        }, 1000);\n        \n        // Also add a backup timeout in case the interval fails\n        setTimeout(() => {\n          if (xamanPollRef.current) clearInterval(xamanPollRef.current);\n          setXamanState({ \n            phase: 'completed', \n            txid: 'demo-tx-backup-' + Date.now().toString().slice(-8)\n          });\n          setTransactionUrl('https://testnet.xrpl.org/transactions/demo-tx-backup-' + Date.now().toString().slice(-8));\n          setShowConfetti(true);\n          setTimeout(() => setShowConfetti(false), 2000);\n          setStep(5);\n        }, 11000); // 11 seconds as backup\n        \n        // Poll for completion (original logic - kept for real payments)\n        xamanPollRef.current = window.setInterval(async () => {\n          try {\n            const status = await checkUserPaymentStatus(response.payloadId!);\n            if (status.completed) {\n              if (xamanPollRef.current) clearInterval(xamanPollRef.current);\n              setXamanState({ phase: 'completed', txid: status.txid });\n              setTransactionUrl(status.transactionUrl);\n              setShowConfetti(true);\n              setTimeout(() => setShowConfetti(false), 2000);\n              setStep(5);\n            }\n          } catch (error) {\n            console.error('Payment status check failed:', error);\n          }\n        }, 2000);\n      } else {\n        setXamanState({ phase: 'error', message: 'Failed to create payment' });\n      }\n    } catch (error) {\n      console.error('Xaman payment creation failed:', error);\n      setXamanState({ phase: 'error', message: 'Failed to create payment' });\n    }\n  };\n\n  const startRlusdCrossmarkFromWhisper = async () => {\n    if (crossmarkBusy) return;\n    \n    setCrossmarkBusy(true);\n    setCrossmarkError(null);\n    \n    try {\n      if (!isCrossmarkAvailable()) {\n        throw new Error('CROSSMARK extension not found');\n      }\n      \n      await connectCrossmark();\n      const finalAmount = amount === 'other' ? Number(otherAmount) : Number(amount);\n      \n      const result = await signRlusdPaymentWithCrossmark({\n        amount: finalAmount,\n        destination: MEDA_ADDRESS,\n        charity: 'MEDA',\n        causeId: 'whisper',\n        issuer: RLUSD_ISSUER\n      });\n      \n      if (result.ok) {\n        setTransactionUrl(result.explorer || null);\n        setShowConfetti(true);\n        setTimeout(() => setShowConfetti(false), 2000);\n        setStep(5);\n      } else {\n        setCrossmarkError(result.error || 'Payment failed');\n      }\n    } catch (error) {\n      console.error('CROSSMARK payment failed:', error);\n      setCrossmarkError(error instanceof Error ? error.message : 'Payment failed');\n    } finally {\n      setCrossmarkBusy(false);\n    }\n  };\n\n  const startFiatTransaction = async () => {\n    try {\n      setFiatState({ phase: 'processing' });\n      \n      // Simulate fiat transaction processing\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      \n      const txid = 'fiat-tx-' + Date.now().toString().slice(-8);\n      setFiatState({ phase: 'completed', txid });\n      setTransactionUrl(`https://testnet.xrpl.org/transactions/${txid}`);\n      setShowConfetti(true);\n      setTimeout(() => setShowConfetti(false), 2000);\n      setStep(5);\n    } catch (error) {\n      console.error('Fiat transaction error:', error);\n      setFiatState({ phase: 'error', message: 'Fiat transaction failed. Please try again.' });\n    }\n  };\n\n  // Step 0: Landing page with quotes\n  if (step === 0) {\n    return (\n      <div className=\"whisper\">\n        <div className=\"story-hero\">\n          <div className=\"overlay\" />\n          \n          {/* Floating elements */}\n          <div className=\"floating-elements\">\n            <div className=\"floating-icon\" style={{ left: '10%', top: '20%', animationDelay: '0s' }}>\n              <Sparkles size={24} />\n            </div>\n            <div className=\"floating-icon\" style={{ left: '85%', top: '15%', animationDelay: '1s' }}>\n              <Star size={20} />\n            </div>\n            <div className=\"floating-icon\" style={{ left: '15%', top: '70%', animationDelay: '2s' }}>\n              <Zap size={22} />\n            </div>\n            <div className=\"floating-icon\" style={{ left: '80%', top: '75%', animationDelay: '3s' }}>\n              <Globe size={18} />\n            </div>\n            <div className=\"floating-icon\" style={{ left: '90%', top: '50%', animationDelay: '4s' }}>\n              <Shield size={16} />\n            </div>\n          </div>\n\n          {/* People in need images */}\n          <div className=\"people-images\">\n            <div className=\"person-image\" style={{ left: '5%', top: '30%', animationDelay: '0.5s' }}>\n              <div className=\"image-placeholder\">\n                <Users size={32} />\n                <div className=\"image-caption\">People in need</div>\n              </div>\n            </div>\n            <div className=\"person-image\" style={{ left: '75%', top: '25%', animationDelay: '1.5s' }}>\n              <div className=\"image-placeholder\">\n                <Heart size={28} />\n                <div className=\"image-caption\">Your impact</div>\n              </div>\n            </div>\n            <div className=\"person-image\" style={{ left: '20%', top: '80%', animationDelay: '2.5s' }}>\n              <div className=\"image-placeholder\">\n                <Gift size={30} />\n                <div className=\"image-caption\">Real change</div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"stage center\">\n            <div className=\"hero-content\">\n              <div className=\"hero-quote quote-fade\">\n                <h1>{QUOTES[quoteIdx]}</h1>\n                <p>Share your story and make a difference</p>\n              </div>\n              <button \n                className=\"cta-button\"\n                onClick={() => setStep(1)}\n              >\n                <Send size={20} />\n                Whisper a Message\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Step 1: Message input\n  if (step === 1) {\n    return (\n      <div className=\"whisper\">\n        <div className=\"stage center\">\n          <div className=\"step-header\">\n            <button className=\"back-button\" onClick={() => setStep(0)}>\n              <ArrowLeft size={20} />\n              Back\n            </button>\n            <div className=\"step-indicator\">Step 1 of 4</div>\n          </div>\n          \n          <div className=\"fade-in\">\n            <div className=\"prompt\">What's your story?</div>\n            <p className=\"hint\">Share a message that will inspire others to give</p>\n            \n            <div className=\"input-container\">\n              <textarea\n                value={message}\n                onChange={(e) => setMessage(e.target.value)}\n                placeholder=\"Tell us why this cause matters to you...\"\n                className=\"whisper-input\"\n                rows={6}\n                maxLength={500}\n              />\n              <div className=\"input-footer\">\n                <button \n                  className={`mic-button ${listening ? 'listening' : ''}`}\n                  onClick={listening ? stopListening : startListening}\n                  disabled={!recognitionRef.current}\n                  aria-pressed={listening}\n                >\n                  <Mic size={16} />\n                  {listening ? 'Listening...' : 'Voice'}\n                </button>\n                <div className=\"hint\">{message.length}/500</div>\n              </div>\n            </div>\n\n            {error && <div className=\"error-message\" role=\"alert\">{error}</div>}\n            \n            <button \n              className=\"primary-button\"\n              onClick={() => setStep(2)}\n              disabled={!message.trim()}\n            >\n              Continue\n              <ArrowRight size={16} />\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Step 2: Amount selection\n  if (step === 2) {\n    return (\n      <div className=\"whisper\">\n        <div className=\"stage center\">\n          <div className=\"step-header\">\n            <button className=\"back-button\" onClick={() => setStep(1)}>\n              <ArrowLeft size={20} />\n              Back\n            </button>\n            <div className=\"step-indicator\">Step 2 of 4</div>\n          </div>\n          \n          <div className=\"fade-in\">\n            <div className=\"prompt\">Choose your amount</div>\n            <p className=\"hint\">Select how much you'd like to donate</p>\n            \n            <div className=\"amount-grid\">\n              {[5, 10, 25, 50, 100].map((amt) => (\n                <button\n                  key={amt}\n                  className={`amount-pill ${amount === amt ? 'selected' : ''}`}\n                  onClick={() => setAmount(amt)}\n                >\n                  ${amt}\n                </button>\n              ))}\n              <button\n                className={`amount-pill ${amount === 'other' ? 'selected' : ''}`}\n                onClick={() => setAmount('other')}\n              >\n                Other\n              </button>\n            </div>\n\n            {amount === 'other' && (\n              <div className=\"other-amount-row\">\n                <input\n                  type=\"number\"\n                  value={otherAmount}\n                  onChange={(e) => setOtherAmount(e.target.value)}\n                  placeholder=\"Enter amount\"\n                  min=\"0.01\"\n                  step=\"0.01\"\n                  className=\"other-input\"\n                />\n                <button\n                  className=\"apply-button\"\n                  onClick={() => {\n                    if (otherAmount && Number(otherAmount) > 0) {\n                      setAmount(Number(otherAmount));\n                    }\n                  }}\n                  disabled={!otherAmount || Number(otherAmount) <= 0}\n                >\n                  Apply\n                </button>\n              </div>\n            )}\n\n            {error && <div className=\"error-message\" role=\"alert\">{error}</div>}\n            \n            <button \n              className=\"primary-button\"\n              onClick={() => setStep(3)}\n              disabled={!amount && !otherAmount}\n            >\n              Continue\n              <ArrowRight size={16} />\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Step 3: Review and visibility\n  if (step === 3) {\n    return (\n      <div className=\"whisper\">\n        <div className=\"stage center\">\n          <div className=\"step-header\">\n            <button className=\"back-button\" onClick={() => setStep(2)}>\n              <ArrowLeft size={20} />\n              Back\n            </button>\n            <div className=\"step-indicator\">Step 3 of 4</div>\n          </div>\n          \n          <div className=\"fade-in\">\n            <div className=\"prompt\">Review your donation</div>\n            <p className=\"hint\">Make sure everything looks right before you give</p>\n            \n            <div className=\"summary-card\">\n              <div className=\"summary-header\">Your Whisper</div>\n              <div className=\"message-preview\">\"{message}\"</div>\n              <div className=\"summary-details\">\n                <div className=\"summary-item\">\n                  <span>Amount</span>\n                  <span className=\"amount\">${amount === 'other' ? otherAmount : amount}</span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"identity-toggle\">\n              <button\n                className={`toggle-button ${isPublic ? 'active' : ''}`}\n                onClick={() => setIsPublic(true)}\n              >\n                <Eye size={16} />\n                Public\n              </button>\n              <button\n                className={`toggle-button ${!isPublic ? 'active' : ''}`}\n                onClick={() => setIsPublic(false)}\n              >\n                <EyeOff size={16} />\n                Anonymous\n              </button>\n            </div>\n\n            {isPublic && (\n              <div className=\"email-section\">\n                <input\n                  type=\"email\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  placeholder=\"Email (optional, for receipt)\"\n                  className=\"email-input\"\n                />\n              </div>\n            )}\n\n            <p className=\"privacy-note\">\n              Your personal information is protected. Only your message and donation amount will be shared.\n            </p>\n\n            {error && <div className=\"error-message\" role=\"alert\">{error}</div>}\n            \n            <button \n              className=\"primary-button\"\n              onClick={handleSubmit}\n              disabled={submitting}\n            >\n              {submitting ? 'Processing...' : 'Send my words and support'}\n              <Send size={16} />\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Step 4: Payment method selection\n  if (step === 4) {\n    return (\n      <div className=\"whisper\">\n        <div className=\"stage center\">\n          <div className=\"step-header\">\n            <button className=\"back-button\" onClick={() => setStep(3)}>\n              <ArrowLeft size={20} />\n              Back\n            </button>\n            <div className=\"step-indicator\">Step 4 of 4</div>\n          </div>\n          \n          <div className=\"fade-in\">\n            <div className=\"prompt\">Choose payment method</div>\n            <p className=\"hint\">Select how you'd like to complete your donation</p>\n            \n            <div className=\"alternative-options\">\n              <div className=\"options-label\">Payment Options</div>\n              <div className=\"options-grid\">\n                <button \n                  className=\"option-button primary\" \n                  onClick={startRlusdXamanFromWhisper}\n                  disabled={xamanState.phase === 'creating'}\n                >\n                  {xamanState.phase === 'creating' ? (\n                    <>\n                      <div className=\"spinner\" />\n                      Creating...\n                    </>\n                  ) : (\n                    <>\n                      <Heart size={16} />\n                      RLUSD (XAMAN)\n                    </>\n                  )}\n                </button>\n                \n                <button \n                  className=\"option-button\" \n                  onClick={startRlusdCrossmarkFromWhisper} \n                  disabled={crossmarkBusy}\n                >\n                  {crossmarkBusy ? (\n                    <>\n                      <div className=\"spinner\" />\n                      Opening…\n                    </>\n                  ) : (\n                    <>\n                      <Heart size={16} />\n                      RLUSD (CROSSMARK)\n                    </>\n                  )}\n                </button>\n\n                <button \n                  className=\"option-button\" \n                  onClick={startFiatTransaction}\n                  disabled={fiatState.phase === 'processing'}\n                >\n                  {fiatState.phase === 'processing' ? (\n                    <>\n                      <div className=\"spinner\" />\n                      Processing…\n                    </>\n                  ) : (\n                    <>\n                      <CreditCard size={16} />\n                      Fiat Payment (USD)\n                    </>\n                  )}\n                </button>\n              </div>\n            </div>\n            \n            {crossmarkError && <div className=\"error-message\" role=\"alert\">{crossmarkError}</div>}\n            {fiatState.phase === 'error' && <div className=\"error-message\" role=\"alert\">{fiatState.message}</div>}\n            {xamanState.phase === 'error' && <div className=\"error-message\" role=\"alert\">{xamanState.message}</div>}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Step 5: Confirmation\n  if (step === 5) {\n    return (\n      <DonationConfirmation\n        message={message}\n        amount={amount === 'other' ? Number(otherAmount) : Number(amount)}\n        transactionHash={xamanState.phase === 'completed' ? xamanState.txid : fiatState.phase === 'completed' ? fiatState.txid : undefined}\n        transactionUrl={transactionUrl || undefined}\n        isPublic={isPublic}\n        onReturnHome={() => window.location.href = '/'}\n      />\n    );\n  }\n\n  return null;\n};\n\nexport default WhisperFlow;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}