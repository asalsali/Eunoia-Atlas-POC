/* WhisperFlow.css */
.whisper {
  --accent: #7c3aed;
  --soft1: #ede9fe;
  --soft2: #faf5ff;
  --accent-contrast: #ffffff;
  min-height: calc(100vh - 80px);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px 16px;
}

.reduced-motion .fade-in, .reduced-motion .slide-up, .reduced-motion .quote-fade { animation: none !important; }

.stage.full { width: 100%; }
.stage.center { max-width: 640px; width: 100%; text-align: center; }

.fade-in { animation: fade 400ms ease both; }
.slide-up { animation: slideUp 300ms ease both; }
.quote-fade { animation: fade 600ms ease both; }

@keyframes fade { from { opacity: 0 } to { opacity: 1 } }
@keyframes slideUp { from { opacity: 0; transform: translateY(8px) } to { opacity: 1; transform: translateY(0) } }

/* Animated gradient hero with pointer light pool */
.story-hero {
  position: relative;
  height: calc(100vh - 80px);
  background:
    radial-gradient(900px 600px at var(--x,50%) var(--y,50%), color-mix(in oklab, var(--accent) 15%, transparent), transparent 60%),
    linear-gradient(135deg, var(--soft1), var(--soft2));
  border-radius: 12px;
  overflow: hidden;
  filter: hue-rotate(var(--hue, 0deg));
}
.whisper:not(.reduced-motion) .story-hero { animation: hue 18s ease-in-out infinite alternate; }
@keyframes hue { from { --hue: 0deg } to { --hue: 8deg } }

/* Decorative blobs */
.story-hero::before,
.story-hero::after {
  content: '';
  position: absolute;
  filter: blur(40px);
  opacity: .2;
  border-radius: 50%;
  pointer-events: none;
}
.story-hero::before { width: 280px; height: 280px; background: var(--soft1); top: 10%; left: 8%; }
.story-hero::after { width: 340px; height: 340px; background: var(--accent); bottom: 12%; right: 10%; }

.story-hero .overlay { position: absolute; inset: 0; background: rgba(30, 41, 59, 0.08); }
.hero-content { position: absolute; inset: 0; display: grid; place-items: center; padding: 24px; color: #1e293b; }
.hero-content { backdrop-filter: saturate(1.05); }
.hero-quote { font-size: 1.75rem; font-weight: 700; text-align: center; max-width: 720px; line-height: 1.3; }

.soft-btn {
  margin-top: 16px;
  background: var(--accent);
  color: var(--accent-contrast);
  border: none;
  border-radius: 9999px;
  padding: 12px 20px;
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 8px 20px color-mix(in oklab, var(--accent) 25%, transparent);
}
.soft-btn.secondary { background: var(--soft1); color: var(--accent); box-shadow: none; }
.soft-btn:active { transform: translateY(1px); }

/* Poetic prompt */
.prompt { font-size: 1.5rem; color: #1e293b; margin-bottom: 16px; }
.prompt.glow { text-shadow: 0 0 24px color-mix(in oklab, var(--accent) 35%, transparent); font-size: 1.75rem; }
.prompt.glow::after { content: 'â–®'; margin-left: .2ch; opacity: .8; animation: blink 1.1s step-end infinite; }
@keyframes blink { 50% { opacity: 0 } }
.prompt.type-on { animation: typeon 320ms ease both; }
@keyframes typeon { from { opacity: 0; transform: translateY(4px) } to { opacity: 1; transform: translateY(0) } }

.whisper-input {
  width: 100%;
  min-height: 120px;
  background: transparent;
  border: none;
  border-bottom: 2px solid color-mix(in oklab, var(--accent) 20%, transparent);
  outline: none;
  color: #1e293b;
  font-size: 1.125rem;
  padding: 10px 8px;
}
.hint { color: #64748b; margin-top: 8px; font-size: 0.9rem; }

/* Amount pills with ripple and suggested ring */
.amount-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin: 12px 0 8px; }
.pill { position: relative; overflow: hidden; background: #fff; border: 1px solid var(--soft1); border-radius: 9999px; padding: 12px 8px; font-weight: 600; color: #1e293b; }
.pill:active::after {
  content: '';
  position: absolute; inset: 0; margin: auto; width: 10px; height: 10px; border-radius: 50%;
  background: color-mix(in oklab, var(--accent) 15%, transparent);
  animation: ripple .5s ease-out;
}
@keyframes ripple { from { transform: scale(1); opacity: .7 } to { transform: scale(25); opacity: 0 } }
.pill.suggested { box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 12%, transparent); }

.link-btn { background: none; border: none; color: var(--accent); text-decoration: underline; cursor: pointer; font-weight: 600; }

.other-row { display: flex; gap: 8px; align-items: center; justify-content: center; margin-top: 8px; }
.other-input { flex: 1; min-width: 0; padding: 12px; border: 1px solid #e2e8f0; border-radius: 8px; }

/* Springy toggles */
.toggle-row { display: flex; gap: 8px; justify-content: center; margin-top: 8px; }
.toggle { background: #fff; border: 1px solid var(--soft1); border-radius: 9999px; padding: 10px 16px; font-weight: 600; color: #1e293b; transition: transform 160ms cubic-bezier(.2,.8,.2,1); }
.toggle.active { background: var(--accent); color: var(--accent-contrast); border-color: var(--accent); transform: scale(1.04); }
.toggle:active { transform: scale(0.98); }

.identity-email { margin-top: 12px; display: flex; gap: 8px; justify-content: center; }
.email-input { flex: 1; min-width: 0; padding: 12px; border: 1px solid #e2e8f0; border-radius: 8px; }

.mic-row { margin-top: 12px; }
.mic-btn { background: none; border: 1px dashed #c4b5fd; color: var(--accent); border-radius: 9999px; padding: 8px 12px; font-weight: 600; }
.mic-btn[aria-pressed="true"] { background: var(--soft1); }

.cta {
  width: 100%; max-width: 480px; margin: 0 auto; display: inline-block; padding: 14px 16px; border-radius: 9999px;
  background: linear-gradient(135deg, var(--accent), color-mix(in oklab, var(--accent) 60%, #a78bfa)); color: var(--accent-contrast); border: none; font-weight: 700; box-shadow: 0 12px 28px color-mix(in oklab, var(--accent) 25%, transparent);
}
.cta.disabled { opacity: 0.6; cursor: not-allowed; }

.intent-error { background: #fee2e2; color: #b91c1c; border: 1px solid #fecaca; border-radius: 8px; padding: 10px 12px; margin-bottom: 12px; }

.privacy-note { color: #94a3b8; margin-top: 8px; }

/* Keepsake confirmation card */
.intent-quote {
  margin: 12px 0 20px; padding: 12px 14px; color: #1e293b; border-radius: 12px;
  background: linear-gradient(#ffffff, #ffffff) padding-box,
              radial-gradient(600px 300px at 20% -10%, var(--soft1), transparent) border-box;
  border: 1px solid transparent;
  box-shadow: 0 10px 30px rgba(17,17,27,.08);
}
.intent-link { color: var(--accent); text-decoration: underline; font-weight: 600; }

/* Confetti */
.confetti { position: fixed; inset: 0; pointer-events: none; overflow: hidden; }
.confetti .piece { position: absolute; width: 8px; height: 12px; border-radius: 2px; opacity: .9; animation: confettiUp 1200ms ease-out forwards; }
@keyframes confettiUp { from { transform: translateY(0) rotate(0deg); opacity: .95 } to { transform: translateY(-60px) rotate(180deg); opacity: 0 } }

.visually-hidden { position: absolute; left: -9999px; width: 1px; height: 1px; overflow: hidden; }

@media (max-width: 480px) { .amount-grid { grid-template-columns: repeat(2, 1fr); } }
